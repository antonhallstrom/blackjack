"use strict";function renderBalance(e){$("#balance").text(e+".00")}function changeTurn(){maxBet=turn++<3?20:50}function renderChip(e,a){var s=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i='\n        <div \n            class="'+a+'"\n            style="background-image: url('+e+'">\n        </div>\n  ';s?$("#splitBetZone").append(i):$("#playerBetZone").append(i)}function validateBet(e){return playerBet=e<=playerBalance&&e<=maxBet?e:0}function placeBet(e){renderBalance(playerBalance-=validateBet(e)),getOrplaceBetAnimation(e)}function getBetChip(e,a){var s=chipData["chip_"+e];return a?playerSplitBets.push(s.value):playerBets.push(s.value),renderChip(s.img,s.class,a||"")}function getOrplaceBetAnimation(e){return $(".addSub-text").text(e+".00")}function payToPlayer(){}function paysThreeToTwo(){}function paysTwoToOne(){}function getSum(e,a){return e.value+a.value}function compareHand(e){return e.reduce(getSum)}function filterAce(e){return!e.some(function(e){return 12===e})||e.reduce(getSum)-11<=21}function findBestHand(e,a){return Math.max(e,a)}function checkBestHand(e,a){return findBestHand(compareHand(e),compareHand(a))}function cardStatus(e){var a=e[0].value,s=e[1].value,i=e.reduce(function(e,a){return e+a.value},0),t=i+(e.some(function(e){return 1===e.value})?10:0),r=e.reduce(function(e,a){return e+(11===a.value)},0);return 10===a&&1===s||1===a&&10===s?"blackjack":21===t||21===i?"21":t<21||i<21?i:t>21||i>21?t-10*r<21?console.log("keep"):void 0:console.log("bust")}function giveToDealer(){for(;cardStatus(dealerHand)<17;)dealsToDealer(open=!0);return console.log(cardStatus(dealerHand))}function dealsToPlayer(e){var a=deck.splice(0,1)[0];e?playerSplitHand.push(a):playerHand.push(a);var s='\n      <div id="card">\n        <figure class="card-front" style="background-image: url('+a.img+')">\n        </figure>\n        <figure class="card-back"></figure>\n      </div>\n     ';e?$("#splitZone").append(s):$("#cardHolder").append(s)}function dealsToDealer(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],a=deck.splice(0,1)[0];dealerHand.push(a);var s='\n      <div id="card" class="card-dealer">\n        <figure class="card-front-dealer '+(e?"open":"closed")+'">\n        </figure>\n        <figure class="card-back-dealer '+(e?"closed":"open")+'" style="background-image: url('+a.img+')"></figure>\n      </div>\n     ';$("#dealerCardZone").append(s)}function flipCard(){$("#card").addClass("flipped")}function validateSplit(e,a){e[0].value!==e[1].value&&a===!1&&playerBalance>=maxBet&&(validSplit.state=!0,placeBet(maxBet),getBetChip(maxBet,!0),playerSplitHand.push(e.splice(0,1)[0]),$("#cardHolder").children(":first-child").appendTo("#splitZone"))}function ifSplitTrue(){validSplit.state===!0&&dealsToPlayer(open=!0)+dealsToPlayer(open=!1)}function shuffle(e){for(var a,s,i=e.length;i;)a=Math.floor(Math.random()*i--),s=e[i],e[i]=e[a],e[a]=s;return e}var playerBalance=100,playerBet=0,turn=0,maxBet=20,playerBets=[],playerSplitBets=[];renderBalance(playerBalance);var cardData=[{img:"images/cards/10_of_clubs.svg",value:10},{img:"images/cards/10_of_diamonds.svg",value:10},{img:"images/cards/10_of_hearts.svg",value:10},{img:"images/cards/10_of_spades.svg",value:10},{img:"images/cards/2_of_clubs.svg",value:2},{img:"images/cards/2_of_diamonds.svg",value:2},{img:"images/cards/2_of_hearts.svg",value:2},{img:"images/cards/2_of_spades.svg",value:2},{img:"images/cards/3_of_clubs.svg",value:3},{img:"images/cards/3_of_diamonds.svg",value:3},{img:"images/cards/3_of_hearts.svg",value:3},{img:"images/cards/3_of_spades.svg",value:3},{img:"images/cards/4_of_clubs.svg",value:4},{img:"images/cards/4_of_diamonds.svg",value:4},{img:"images/cards/4_of_hearts.svg",value:4},{img:"images/cards/4_of_spades.svg",value:4},{img:"images/cards/5_of_clubs.svg",value:5},{img:"images/cards/5_of_diamonds.svg",value:5},{img:"images/cards/5_of_hearts.svg",value:5},{img:"images/cards/5_of_spades.svg",value:5},{img:"images/cards/6_of_clubs.svg",value:6},{img:"images/cards/6_of_diamonds.svg",value:6},{img:"images/cards/6_of_hearts.svg",value:6},{img:"images/cards/6_of_spades.svg",value:6},{img:"images/cards/7_of_clubs.svg",value:7},{img:"images/cards/7_of_diamonds.svg",value:7},{img:"images/cards/7_of_hearts.svg",value:7},{img:"images/cards/7_of_spades.svg",value:7},{img:"images/cards/8_of_clubs.svg",value:8},{img:"images/cards/8_of_diamonds.svg",value:8},{img:"images/cards/8_of_hearts.svg",value:8},{img:"images/cards/8_of_spades.svg",value:8},{img:"images/cards/9_of_clubs.svg",value:9},{img:"images/cards/9_of_diamonds.svg",value:9},{img:"images/cards/9_of_hearts.svg",value:9},{img:"images/cards/9_of_spades.svg",value:9},{img:"images/cards/ace_of_clubs.svg",value:11},{img:"images/cards/ace_of_diamonds.svg",value:11},{img:"images/cards/ace_of_hearts.svg",value:11},{img:"images/cards/ace_of_spades.svg",value:11},{img:"images/cards/jack_of_clubs2.svg",value:10},{img:"images/cards/jack_of_diamonds2.svg",value:10},{img:"images/cards/jack_of_hearts2.svg",value:10},{img:"images/cards/jack_of_spades2.svg",value:10},{img:"images/cards/king_of_clubs2.svg",value:10},{img:"images/cards/king_of_diamonds2.svg",value:10},{img:"images/cards/king_of_hearts2.svg",value:10},{img:"images/cards/king_of_spades2.svg",value:10},{img:"images/cards/queen_of_clubs2.svg",value:10},{img:"images/cards/queen_of_diamonds2.svg",value:10},{img:"images/cards/queen_of_hearts2.svg",value:10},{img:"images/cards/queen_of_spades2.svg",value:10}],testCardData=[{img:"images/cards/ace_of_diamonds.svg",value:11},{img:"images/cards/5_of_diamonds.svg",value:5},{img:"images/cards/queen_of_spades2.svg",value:10}],preloadImage=function(e){return new Promise(function(a,s){var i=new Image;i.src=e,setTimeout(function(){i.onload=a(i),i.onerror=s},100)})};Promise.all(cardData.map(function(e){return preloadImage(e.img)})).then(function(e){$("#gameWindow").remove()});var chipData={chip_1:{img:"images/chips/chip-1.svg",value:1,class:"one"},chip_2:{img:"images/chips/chip-2.svg",value:2,class:"two"},chip_5:{img:"images/chips/chip-5.svg",value:5,class:"five"},chip_10:{img:"images/chips/chip-10.svg",value:10,class:"ten"},chip_20:{img:"../images/chips/chip-20.svg",value:20,class:"tweenty"},chip_50:{img:"../images/chips/chip-50.svg",value:50,class:"fifthy"},chip_100:{img:"images/chips/chip-100.svg",value:100,class:"hundred"}},playerHand=[],playerSplitHand=[],dealerHand=[],validSplit={state:!1,reset:function(){this.set=!1}};$(".split-button").on("click",function(){validateSplit(playerHand,validSplit.state)}),$(".hit-button").on("click",function(){ifSplitTrue()}),$(".start-button").on("click",function(){$(".start-window").remove(),$(".hit-button").removeAttr("disabled"),$(".split-button").removeAttr("disabled"),$(".double-button").removeAttr("disabled"),$(".stay-button").removeAttr("disabled"),setTimeout(function(){$(".addSub-tooltip").addClass("show-tooltip"),placeBet(maxBet),getBetChip(maxBet,!1),setTimeout(function(){dealsToPlayer()},400),setTimeout(dealsToDealer(!1),600),setTimeout(function(){$(".addSub-tooltip").removeClass("show-tooltip")},700),setTimeout(function(){dealsToPlayer()},900),setTimeout(function(){dealsToDealer()},1100)},500)}),$(".hit-button").on("click",function(){}),$(".stay-button").on("click",function(){flipCard(),giveToDealer()}),$(".hit-button").attr("disabled","disabled"),$(".split-button").attr("disabled","disabled"),$(".double-button").attr("disabled","disabled"),$(".stay-button").attr("disabled","disabled");var cards=document.querySelectorAll(".card-front"),cardHolder=document.querySelector("#cardHolder"),splitZone=document.querySelector("#splitZone"),dealerCardZone=document.querySelector("#dealerCardZone"),deck=cardData;shuffle(deck);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImJhbGFuY2UuanMiLCJjYWxjSGFuZC5qcyIsImRlYWxlci5qcyIsInNodWZmbGUuanMiLCJjYXJkRGF0YS5qcyIsImNoaXBEYXRhLmpzIiwicnVuR2FtZS5qcyIsInNjcm9sbC5qcyJdLCJuYW1lcyI6WyJyZW5kZXJCYWxhbmNlIiwicGxheWVyQmFsYW5jZSIsIiQiLCJ0ZXh0IiwiY2hhbmdlVHVybiIsIm1heEJldCIsInR1cm4iLCJyZW5kZXJDaGlwIiwiY2hpcEltZyIsImNoaXBDbGFzcyIsInNwbGl0IiwiYXJndW1lbnRzIiwibGVuZ3RoIiwidW5kZWZpbmVkIiwiY2hpcEVsZW1lbnQiLCJhcHBlbmQiLCJ2YWxpZGF0ZUJldCIsImJldCIsInBsYXllckJldCIsInBsYWNlQmV0IiwiZ2V0T3JwbGFjZUJldEFuaW1hdGlvbiIsImdldEJldENoaXAiLCJjaGlwIiwiY2hpcERhdGEiLCJwbGF5ZXJTcGxpdEJldHMiLCJwdXNoIiwidmFsdWUiLCJwbGF5ZXJCZXRzIiwiaW1nIiwiY2xhc3MiLCJwYXlUb1BsYXllciIsInBheXNUaHJlZVRvVHdvIiwicGF5c1R3b1RvT25lIiwiZ2V0U3VtIiwiYWNjIiwiY3VyIiwiY29tcGFyZUhhbmQiLCJhcnIiLCJyZWR1Y2UiLCJmaWx0ZXJBY2UiLCJzb21lIiwiZSIsImZpbmRCZXN0SGFuZCIsImhhbmRBIiwiaGFuZEIiLCJNYXRoIiwibWF4IiwiY2hlY2tCZXN0SGFuZCIsImNhcmRTdGF0dXMiLCJwbGF5ZXJDYXJkcyIsImZpcnN0Q2FyZFZhbHVlIiwic2Vjb25kQ2FyZFZhbHVlIiwidG90YWxWYWx1ZSIsImxhc3QiLCJjdXJyZW50IiwidG90YWxWYWx1ZVdpdGhBY2UiLCJjYXJkIiwiY291bnQiLCJjb25zb2xlIiwibG9nIiwiZ2l2ZVRvRGVhbGVyIiwiZGVhbGVySGFuZCIsImRlYWxzVG9EZWFsZXIiLCJvcGVuIiwiZGVhbHNUb1BsYXllciIsImRlY2siLCJzcGxpY2UiLCJwbGF5ZXJTcGxpdEhhbmQiLCJwbGF5ZXJIYW5kIiwiY2FyZE1hcmt1cCIsImZsaXBDYXJkIiwiYWRkQ2xhc3MiLCJ2YWxpZGF0ZVNwbGl0IiwiYXJyYXkiLCJtYXhTcGxpdCIsInZhbGlkU3BsaXQiLCJzdGF0ZSIsImNoaWxkcmVuIiwiYXBwZW5kVG8iLCJpZlNwbGl0VHJ1ZSIsInNodWZmbGUiLCJpIiwidCIsIm0iLCJmbG9vciIsInJhbmRvbSIsImNhcmREYXRhIiwidGVzdENhcmREYXRhIiwicHJlbG9hZEltYWdlIiwidXJsIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJJbWFnZSIsInNyYyIsInNldFRpbWVvdXQiLCJvbmxvYWQiLCJvbmVycm9yIiwiYWxsIiwibWFwIiwidGhlbiIsInJlcyIsInJlbW92ZSIsImNoaXBfMSIsImNoaXBfMiIsImNoaXBfNSIsImNoaXBfMTAiLCJjaGlwXzIwIiwiY2hpcF81MCIsImNoaXBfMTAwIiwicmVzZXQiLCJ0aGlzIiwic2V0Iiwib24iLCJyZW1vdmVBdHRyIiwicmVtb3ZlQ2xhc3MiLCJhdHRyIiwiY2FyZHMiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJjYXJkSG9sZGVyIiwicXVlcnlTZWxlY3RvciIsInNwbGl0Wm9uZSIsImRlYWxlckNhcmRab25lIl0sIm1hcHBpbmdzIjoiWUFRQSxTQUFTQSxlQUFjQyxHQUNuQkMsRUFBRSxZQUFZQyxLQUFLRixFQUFnQixPQUd2QyxRQUFTRyxjQUNMQyxPQUFTQyxPQUFTLEVBQUksR0FBSyxHQUcvQixRQUFTQyxZQUFXQyxFQUFTQyxHQUEwQixHQUFmQyxHQUFlQyxVQUFBQyxPQUFBLEdBQUFDLFNBQUFGLFVBQUEsSUFBQUEsVUFBQSxHQUM3Q0csRUFBQUEsdUNBRVdMLEVBRlgsK0NBR2lDRCxFQUhqQyx3QkFNTkUsR0FBUVIsRUFBRSxpQkFBaUJhLE9BQU9ELEdBQWVaLEVBQUUsa0JBQWtCYSxPQUFPRCxHQUloRixRQUFTRSxhQUFZQyxHQUNqQixNQUFPQyxXQUFhRCxHQUFPaEIsZUFBaUJnQixHQUFPWixPQUFVWSxFQUFNLEVBR3ZF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aUJBQ0QsS0FFSCtCLFdBQVdqQyxlQUFjLEdBQVEsS0FFaENpQyxXQUFXLFdBQ1I3RixFQUFFLG1CQUFtQmlILFlBQVksaUJBQ2xDLEtBRUhwQixXQUFXLFdBQ1AvQixpQkFDRCxLQUVIK0IsV0FBVyxXQUNQakMsaUJBQ0QsT0FDSCxPQUdSNUQsRUFBRSxlQUFlK0csR0FBRyxRQUFTLGNBSzdCL0csRUFBRSxnQkFBZ0IrRyxHQUFHLFFBQVMsV0FDekIzQyxXQUNBVixpQkFNTDFELEVBQUUsZUFBZWtILEtBQUssV0FBWSxZQUNsQ2xILEVBQUUsaUJBQWlCa0gsS0FBSyxXQUFZLFlBQ3BDbEgsRUFBRSxrQkFBa0JrSCxLQUFLLFdBQVksWUFDckNsSCxFQUFFLGdCQUFnQmtILEtBQUssV0FBWSxXQ2xEbkMsSUFBTUMsT0FBUUMsU0FBU0MsaUJBQWlCLGVBQ2xDQyxXQUFhRixTQUFTRyxjQUFjLGVBQ3BDQyxVQUFZSixTQUFTRyxjQUFjLGNBQ25DRSxlQUFpQkwsU0FBU0csY0FBYyxtQkpGeEN4RCxLQUFPcUIsUUFxQmJOLFNBQVFmIiwiZmlsZSI6ImFsbC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJsZXQgcGxheWVyQmFsYW5jZSA9IDEwMDtcbmxldCBwbGF5ZXJCZXQgPSAwO1xubGV0IHR1cm4gPSAwO1xubGV0IG1heEJldCA9IDIwO1xubGV0IHBsYXllckJldHMgPSBbXTtcbmxldCBwbGF5ZXJTcGxpdEJldHMgPSBbXTtcbnJlbmRlckJhbGFuY2UocGxheWVyQmFsYW5jZSk7XG5cbmZ1bmN0aW9uIHJlbmRlckJhbGFuY2UocGxheWVyQmFsYW5jZSkge1xuwqDCoMKgwqAkKCcjYmFsYW5jZScpLnRleHQocGxheWVyQmFsYW5jZSArICcuMDAnKTtcbn1cblxuZnVuY3Rpb24gY2hhbmdlVHVybigpIHtcbsKgwqDCoMKgbWF4QmV0ID0gdHVybisrIDwgMyA/IDIwIDogNTA7XG59XG5cbmZ1bmN0aW9uIHJlbmRlckNoaXAoY2hpcEltZywgY2hpcENsYXNzLCBzcGxpdCA9IGZhbHNlKSB7XG7CoMKgwqDCoGNvbnN0IGNoaXBFbGVtZW50ID0gYFxuICAgICAgICA8ZGl2IFxuICAgICAgICAgICAgY2xhc3M9XCIke2NoaXBDbGFzc31cIlxuwqDCoMKgwqAgICAgICAgIHN0eWxlPVwiYmFja2dyb3VuZC1pbWFnZTogdXJsKCR7Y2hpcEltZ31cIj5cbiAgICAgICAgPC9kaXY+XG4gIGA7XG7CoCAgwqBzcGxpdCA/ICQoJyNzcGxpdEJldFpvbmUnKS5hcHBlbmQoY2hpcEVsZW1lbnQpIDogJCgnI3BsYXllckJldFpvbmUnKS5hcHBlbmQoY2hpcEVsZW1lbnQpO1xuXG59XG5cbmZ1bmN0aW9uIHZhbGlkYXRlQmV0KGJldCkge1xuwqDCoMKgwqByZXR1cm4gcGxheWVyQmV0ID0gKGJldCA8PSBwbGF5ZXJCYWxhbmNlICYmIGJldCA8PSBtYXhCZXQpID8gYmV0IDogMDtcbn1cblxuZnVuY3Rpb24gcGxhY2VCZXQoYmV0KSB7XG7CoMKgwqDCoHJlbmRlckJhbGFuY2UocGxheWVyQmFsYW5jZSA9IHBsYXllckJhbGFuY2UgLSB2YWxpZGF0ZUJldChiZXQpKSxcbiAgICBnZXRPcnBsYWNlQmV0QW5pbWF0aW9uKGJldCk7XG59XG5cbmZ1bmN0aW9uIGdldEJldENoaXAoYmV0LCBzcGxpdCkge1xuwqDCoMKgwqBjb25zdCBjaGlwID0gY2hpcERhdGFbYGNoaXBfJHtiZXR9YF07XG4gICAgc3BsaXQgPyBwbGF5ZXJTcGxpdEJldHMucHVzaChjaGlwLnZhbHVlKSA6IHBsYXllckJldHMucHVzaChjaGlwLnZhbHVlKTtcbsKgwqDCoMKgcmV0dXJuIHJlbmRlckNoaXAoY2hpcC5pbWcsIGNoaXAuY2xhc3MsIHNwbGl0IHx8ICcnKTtcbn07XG5cbmZ1bmN0aW9uIGdldE9ycGxhY2VCZXRBbmltYXRpb24oYmV0KSB7XG4gICAgcmV0dXJuICQoJy5hZGRTdWItdGV4dCcpLnRleHQoYmV0ICsgJy4wMCcpO1xufVxuXG5mdW5jdGlvbiBwYXlUb1BsYXllcigpIHtcbiAgICBcbn1cblxuLy8gQmxhY2tKYWNrXG5mdW5jdGlvbiBwYXlzVGhyZWVUb1R3bygpIHtcbiAgICBcbn1cblxuLy8gSW5zdXJhbmNlXG5mdW5jdGlvbiBwYXlzVHdvVG9PbmUoKSB7XG4gICAgXG59XG5cblxuLy8gU1BMSVRUSU5HIFxuLy8gSGFzIHRvIGJlIGVxdWFsIHRvIG15IGFtb3V0LlxuXG4vLyBET1VCTElOR1xuLy8gSWYgeW91ciBmaXJzdCAyIGNhcmRzID0gYSA5LCAxMCBvciAxMS4geW91IG1heVxuLy8gZG91YmxpbmcgZG93biwgd2l0aCBhID0gb3IgPiBhbW91bnQuXG4vLyBpZiB3aW4gd2lsbCBnZXQgcGFpZCBmb3IgMiBhbmQgbG9zZSBsb3NlIDJcbi8vIGlmIGRvdWJsaW5nIGRvd24gb3IgMTIgb3IgaGlnaGVyLCBhcmUgZWl0aGVyIHdhc3RlZCBvciBjaGVhdGluZy5cblxuXG5cbi8vIEhJVFRJTkdcbi8vIHlvdSBhcmUgYWxvdWQgdG8gaGl0IHVudGlsIHlvdSBnZXQgMTgtMjEgb3IgdW50aWwgYnVzdC5cbi8vIHlvdSBjYW4gaGl0IGlmIHlvdSAxLTE3IHNldmVudGVlblxuXG4vLyBCdXQgaWYgSSB3aWxsIGJlIHBhaWQgaW4gY2hpcHMsIHNheSBsaWtlIDQwLlxuLy8gSG93IHdvdWxkIGkgcmVuZGVyIHRoYXQgbG9naWMgb3V0LlxuXG5cbi8vIGNvbnN0IHBsYXllckJhbGFuY2UgPSAxMDA7XG4vLyBjb25zdCBiZXRzSW5QbGF5ZXJab25lID0gW107XG4vLyBjb25zdCB0dXJuID0gMDtcbi8vIGxldCBiZXQgPSAyMDtcbi8vIC8vIEFuaW1hdGlvbiBvbiBsb2FkLCBzbyBudW1iZXJzIHRpY2sgdXA/XG5cbi8vICQoJyNiYWxhbmNlJykudGV4dChwbGF5ZXJCYWxhbmNlICsgJy4wMCcpO1xuXG5cbi8vIC8vIGZ1bmN0aW9uIHBsYWNlIGluaXRhbCBiZXQuXG4vLyAvLyB0aGVuIHJhaXNlIGJldCBhZnRlciAzIHR1cm5zLlxuXG4vLyAvLyBGdW5jdGlvbiB0aGF0IHBsYWNlIGJldFxuLy8gLy8gZnVuY3Rpb24gdGhhdCBjYW4gc3BsaXQgYmV0IGludG8gYmV0em9uZVxuXG4vLyAvLyBCZXQgMjAgYXMgYSBtaW5pbXVtLCB3aGVuIFxuLy8gZnVuY3Rpb24gaW5pdGFsQmV0KCkge1xuLy8gIHR1cm4gPCAzID8gYmV0ID0gMjAgOiBiZXQgPSA1MDtcbi8vIC8vICByZXR1cm4gcGxhY2VCZXQoYmV0KVxuLy8gfVxuXG4vLyBmdW5jdGlvbiBpbml0YWxCZXQoKSB7XG4vLyAgcmV0dXJuIGJldCA9IHR1cm4gPCAzID8gMjAgOiA1MDtcbi8vICAvL3JldHVybiBwbGFjZUJldChiZXQpXG4vLyB9XG5cbi8vIC8vIFJlbmRlciBjaGlwXG4vLyBmdW5jdGlvbiByZW5kZXJDaGlwKGNoaXBJbWcsIGNoaXBDbGFzcykge1xuLy8gICAgIGNvbnN0IGNoaXBNYXJrdXAgPSBgXG4vLyAgICAgPGRpdiBjbGFzcz1cIiR7Y2hpcENsYXNzfVwiIHN0eWxlPVwiYmFja2dyb3VuZC1pbWFnZTogdXJsKCR7Y2hpcEltZ31cIj5cbi8vICAgICA8L2Rpdj5cbi8vICAgICBgO1xuLy8gICAgICQoJyNwbGF5ZXJCZXRab25lJykuYXBwZW5kKGNoaXBNYXJrdXApO1xuLy8gICAgIGNvbnNvbGUubG9nKGNoaXBNYXJrdXApO1xuLy8gfVxuLy8gLy8gRml4IHNvIHRoYXQgdGhlIHZhbHVlIGNhbnQgYmUgZnVja2VkIHVwXG4vLyBmdW5jdGlvbiBwbGFjZUJldCh2YWx1ZSkge1xuLy8gcGxheWVyQmFsYW5jZSA9IE51bWJlcihwbGF5ZXJCYWxhbmNlKSAtIHZhbHVlO1xuLy8gJCgnI2JhbGFuY2UnKS50ZXh0KHBsYXllckJhbGFuY2UgKyAnLjAwJyk7XG4vLyB9XG5cbi8vIGZ1bmN0aW9uIGdldEJldENoaXAoKSB7XG4vLyAgICAgbGV0IHgsIHk7XG4vLyAgICAgY2hpcERhdGEuZm9yRWFjaChmdW5jdGlvbihlKSB7XG4vLyAgICAgICAgIGlmKGUudmFsdWUgPT09IGJldCkge1xuLy8gICAgICAgICByZXR1cm4geCA9IGUuaW1nLCB5ID0gZS5jbGFzcywgYmV0c0luUGxheWVyWm9uZS5wdXNoKGUudmFsdWUpO1xuLy8gICAgIH1cbi8vICAgICB9KTtcbi8vICByZXR1cm4gcmVuZGVyQ2hpcCh4LCB5KTtcbi8vIH07IiwiXG5cblxuZnVuY3Rpb24gZ2V0U3VtKGFjYywgY3VyKSB7XG4gICAgcmV0dXJuIGFjYy52YWx1ZSArIGN1ci52YWx1ZTtcbn1cblxuZnVuY3Rpb24gY29tcGFyZUhhbmQoYXJyKSB7XG4gICAgcmV0dXJuIGFyci5yZWR1Y2UoZ2V0U3VtKTtcbn1cblxuXG5mdW5jdGlvbiBmaWx0ZXJBY2UoYXJyKSB7XG4gICAgY29uc3Qgc3VtID0gYXJyO1xuICAgIGlmKGFyci5zb21lKChlKSA9PiBlID09PSAxMikpIHtcbiAgICAgICAgcmV0dXJuIChhcnIucmVkdWNlKGdldFN1bSkgLSAxMSA8PSAyMSk7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xufVxuXG5cbmZ1bmN0aW9uIGZpbmRCZXN0SGFuZChoYW5kQSwgaGFuZEIpIHtcbiAgICByZXR1cm4gTWF0aC5tYXgoaGFuZEEsIGhhbmRCKTtcbn1cblxuZnVuY3Rpb24gY2hlY2tCZXN0SGFuZChoYW5kQSwgaGFuZEIpIHtcbiAgcmV0dXJuIGZpbmRCZXN0SGFuZChjb21wYXJlSGFuZChoYW5kQSksIGNvbXBhcmVIYW5kKGhhbmRCKSk7XG59XG5cblxuZnVuY3Rpb24gY2FyZFN0YXR1cyhwbGF5ZXJDYXJkcykge1xuwqDCoGNvbnN0IGZpcnN0Q2FyZFZhbHVlID0gcGxheWVyQ2FyZHNbMF0udmFsdWU7XG7CoMKgY29uc3Qgc2Vjb25kQ2FyZFZhbHVlID0gcGxheWVyQ2FyZHNbMV0udmFsdWU7XG7CoMKgY29uc3QgdG90YWxWYWx1ZSA9IHBsYXllckNhcmRzLnJlZHVjZSgobGFzdCwgY3VycmVudCkgPT4gbGFzdCArIGN1cnJlbnQudmFsdWUsIDApO1xuwqDCoGNvbnN0IHRvdGFsVmFsdWVXaXRoQWNlID0gdG90YWxWYWx1ZSArIChwbGF5ZXJDYXJkcy5zb21lKGNhcmQgPT4gY2FyZC52YWx1ZSA9PT0gMSkgPyAxMCA6IDApO1xuICBjb25zdCBjb3VudCA9IHBsYXllckNhcmRzLnJlZHVjZShmdW5jdGlvbihhY2MsIGN1cikge1xuICAgIHJldHVybiBhY2MgKyAoY3VyLnZhbHVlID09PSAxMSk7XG4gIH0sIDApO1xuwqDCoGlmIChmaXJzdENhcmRWYWx1ZSA9PT0gMTAgJiYgc2Vjb25kQ2FyZFZhbHVlID09PSAxIHx8XG7CoMKgwqDCoGZpcnN0Q2FyZFZhbHVlID09PSAxICYmIHNlY29uZENhcmRWYWx1ZSA9PT0gMTApIHJldHVybiAnYmxhY2tqYWNrJztcbsKgwqBpZiAodG90YWxWYWx1ZVdpdGhBY2UgPT09IDIxIHx8IHRvdGFsVmFsdWUgPT09IDIxKSByZXR1cm4gJzIxJztcbsKgwqBpZiAodG90YWxWYWx1ZVdpdGhBY2UgPCAyMSB8fCB0b3RhbFZhbHVlIDwgMjEpIHJldHVybiAna2VlcCBnb2luZz8nLCB0b3RhbFZhbHVlO1xuwqDCoGlmICh0b3RhbFZhbHVlV2l0aEFjZSA+IDIxIHx8IHRvdGFsVmFsdWUgPiAyMSkge1xuICAgICBpZih0b3RhbFZhbHVlV2l0aEFjZSAtIChjb3VudCAqIDEwKSA8IDIxKSB7XG4gICAgICAgICByZXR1cm4gY29uc29sZS5sb2coXCJrZWVwXCIpO1xuICAgfSBcbn0gZWxzZSByZXR1cm4gY29uc29sZS5sb2coXCJidXN0XCIpO1xufVxuXG5cbi8vIGRlYWxzVG9EZWFsZXIob3BlbiA9IHRydWUpO1xuXG5mdW5jdGlvbiBnaXZlVG9EZWFsZXIoKSB7XG4gICAgd2hpbGUgKGNhcmRTdGF0dXMoZGVhbGVySGFuZCkgPCAxNykge1xuICAgICAgICAgIGRlYWxzVG9EZWFsZXIob3BlbiA9IHRydWUpO1xuICAgIH1cbiAgICByZXR1cm4gY29uc29sZS5sb2coY2FyZFN0YXR1cyhkZWFsZXJIYW5kKSk7XG59XG5cbi8vIGZ1bmN0aW9uIGdpdmVUb0RlYWxlcigpIHtcbi8vICAgICBpZiAoY2FyZFN0YXR1cyhkZWFsZXJIYW5kKSA8IDE3KSB7XG4vLyAgICAgICAgICBkZWFsc1RvRGVhbGVyKG9wZW4gPSB0cnVlKTtcbi8vICAgICAgICAgIHJldHVybiAgZ2l2ZVRvRGVhbGVyKCk7XG4vLyAgICAgfSBlbHNlIGNvbnNvbGUubG9nKGNhcmRTdGF0dXMoZGVhbGVySGFuZCkpO1xuLy8gfTtcblxuXG4iLCIvLyA0LiBEZWFsZXIgbG9naWNcbi8vIERlYWxlciBzaG91bGQgaGFuZCB1dCBjYXJkIHRvIHBsYXllciBvbmUgYXQgYSB0aW1lXG4vLyBTbyBmaXJzdCBvbmUgY2FyZCB0byBtZSB0aGVuIG9uZSBmYWNlIGRvd24gdG8gdGhlIERlYWxlclxuLy8gVGhlbiBhbm90aGVyIHRvIG1lIHRoZW4gYSBmYWNlLXVwIHRvIHRoZSBkZWFsZXIuXG5cbi8vIHdlIHdpbGwgc3BsaWNlKDAsIDEpIHRvIGRyYXcgYSBjYXJkLlxuXG4vLyBIb3cgdG8gcGxhY2UgYSBjYXJkIHRvIHRoZSBwbGF5ZXIuXG5cbi8vIEhvdyB0byBwbGFjZSBhIGNhcmQgdG8gdGhlIGRlYWxlciBmYWNlLWRvd24uXG5cbmxldCBwbGF5ZXJIYW5kID0gW107XG5sZXQgcGxheWVyU3BsaXRIYW5kID0gW107XG5sZXQgZGVhbGVySGFuZCA9IFtdO1xuXG5cbmNvbnN0IHZhbGlkU3BsaXQgPSB7XG4gICAgXG4gICAgc3RhdGU6IGZhbHNlLFxuICAgXG4gICAgcmVzZXQoKSB7XG4gICAgICAgdGhpcy5zZXQgPSBmYWxzZTtcbiAgICB9XG59O1xuXG4vLyBwbGF5ZXJIYW5kLnB1c2goY2FyZCk7IFxuLy8gRGVhbHMgdG8gcGxheWVycyBoYW5kLCBub3cgd2UgY2FuIGtlZXAgdHJhY2sgb2YgdGhlIG9yZGVyIG9mIGNhcmRzLiBkZWFsdC5cbi8vIEFuZCB3aGF0IGNhcmRzIGJlbG9uZyB0byBwbGF5ZXIuXG5cblxuZnVuY3Rpb24gZGVhbHNUb1BsYXllcihzcGxpdCkge1xuICAgIC8vIERlYWxzIHRvcCBjYXJkIHRvIHBsYXllciwgIW5lZWQgdG8gY2hlY2sgaWYgdXNlciBuZWVkcyBzcGxpdC5cbiAgICAgY29uc3QgY2FyZCA9IGRlY2suc3BsaWNlKDAsMSlbMF07XG4gICAgIHNwbGl0ID8gcGxheWVyU3BsaXRIYW5kLnB1c2goY2FyZCkgOiBwbGF5ZXJIYW5kLnB1c2goY2FyZCk7XG4gICAgIC8vIENyZWF0aW5nIGEgY2FyZFxuICAgICBjb25zdCBjYXJkTWFya3VwID0gYFxuICAgICAgPGRpdiBpZD1cImNhcmRcIj5cbiAgICAgICAgPGZpZ3VyZSBjbGFzcz1cImNhcmQtZnJvbnRcIiBzdHlsZT1cImJhY2tncm91bmQtaW1hZ2U6IHVybCgke2NhcmQuaW1nfSlcIj5cbiAgICAgICAgPC9maWd1cmU+XG4gICAgICAgIDxmaWd1cmUgY2xhc3M9XCJjYXJkLWJhY2tcIj48L2ZpZ3VyZT5cbiAgICAgIDwvZGl2PlxuICAgICBgO1xuXG4gICAgIHNwbGl0ID8gJCgnI3NwbGl0Wm9uZScpLmFwcGVuZChjYXJkTWFya3VwKSA6ICQoJyNjYXJkSG9sZGVyJykuYXBwZW5kKGNhcmRNYXJrdXApO1xufTtcblxuXG5mdW5jdGlvbiBkZWFsc1RvRGVhbGVyKG9wZW4gPSB0cnVlKSB7XG7CoMKgLy8gRGVhbHMgdG9wIGNhcmQgdG8gZGVhbGVyIGZhY2UtZG93blxuwqDCoGNvbnN0IGNhcmQgPSBkZWNrLnNwbGljZSgwLCAxKVswXTtcbiAgZGVhbGVySGFuZC5wdXNoKGNhcmQpO1xuwqDCoC8vIENyZWF0aW5nIGEgY2FyZFxuwqDCoGNvbnN0IGNhcmRNYXJrdXAgPSBgXG7CoMKgwqDCoMKgwqA8ZGl2IGlkPVwiY2FyZFwiIGNsYXNzPVwiY2FyZC1kZWFsZXJcIj5cbsKgwqDCoMKgwqDCoMKgwqA8ZmlndXJlIGNsYXNzPVwiY2FyZC1mcm9udC1kZWFsZXIgJHtvcGVuID8gJ29wZW4nIDogJ2Nsb3NlZCd9XCI+XG7CoMKgwqDCoMKgwqDCoMKgPC9maWd1cmU+XG7CoMKgwqDCoMKgwqDCoMKgPGZpZ3VyZSBjbGFzcz1cImNhcmQtYmFjay1kZWFsZXIgJHtvcGVuID8gJ2Nsb3NlZCcgOiAnb3Blbid9XCIgc3R5bGU9XCJiYWNrZ3JvdW5kLWltYWdlOiB1cmwoJHtjYXJkLmltZ30pXCI+PC9maWd1cmU+XG7CoMKgwqDCoMKgwqA8L2Rpdj5cbsKgwqDCoMKgwqBgO1xuwqDCoCQoJyNkZWFsZXJDYXJkWm9uZScpLmFwcGVuZChjYXJkTWFya3VwKTtcblxufVxuXG5cbi8vIFNob3VsZCBvbmx5IHRhcmdldCB0aGUgZmlyc3QgY2FyZC5cbmZ1bmN0aW9uIGZsaXBDYXJkKCkge8KgwqDCoMKgXG7CoMKgJCgnI2NhcmQnKS5hZGRDbGFzcygnZmxpcHBlZCcpO1xufTtcblxuLy8gaWYgdXNlciB3YW50cyB0byBzcGxpdFxuLy8gdGFrZSBhcnJheSBpZiB3YW50IHRvIGNoYW5nZSBydWxlLlxuLy8gaWYgc3BsaXQgdHJ1ZSwgY2FuIG9ubHkgYnkgYXBwbGllZCBvbmNlLlxuZnVuY3Rpb24gdmFsaWRhdGVTcGxpdChhcnJheSwgbWF4U3BsaXQpIHtcbiAgICBpZihhcnJheVswXS52YWx1ZSAhPT0gYXJyYXlbMV0udmFsdWUgJiYgbWF4U3BsaXQgPT09IGZhbHNlICYmIHBsYXllckJhbGFuY2UgPj0gbWF4QmV0KSB7XG4gICAgICAgICB2YWxpZFNwbGl0LnN0YXRlID0gdHJ1ZTtcbiAgICAgICAgICBwbGFjZUJldChtYXhCZXQpO1xuICAgICAgICAgICBnZXRCZXRDaGlwKG1heEJldCwgdHJ1ZSk7XG4gICAgICAgICAgICBwbGF5ZXJTcGxpdEhhbmQucHVzaChhcnJheS5zcGxpY2UoMCwxKVswXSk7XG4gICAgICAgICAgICAkKCcjY2FyZEhvbGRlcicpLmNoaWxkcmVuKCc6Zmlyc3QtY2hpbGQnKS5hcHBlbmRUbygnI3NwbGl0Wm9uZScpO1xuICAgIH0gZWxzZSBmYWxzZTtcbiB9XG5cbi8vIEV2ZW50IGxpc3RuZXIgZm9yIGJ1dHRvbi5cbiQoJy5zcGxpdC1idXR0b24nKS5vbignY2xpY2snLCAoKSA9PiB7XG4gICAgdmFsaWRhdGVTcGxpdChwbGF5ZXJIYW5kLCB2YWxpZFNwbGl0LnN0YXRlKTtcbn0pO1xuXG5cblxuJCgnLmhpdC1idXR0b24nKS5vbignY2xpY2snLCBmdW5jdGlvbigpIHtcbiAgICBpZlNwbGl0VHJ1ZSgpO1xufSk7XG5cbmZ1bmN0aW9uIGlmU3BsaXRUcnVlKCkge1xuICAgIHZhbGlkU3BsaXQuc3RhdGUgPT09IHRydWUgPyBkZWFsc1RvUGxheWVyKG9wZW4gPSB0cnVlKSArIGRlYWxzVG9QbGF5ZXIob3BlbiA9IGZhbHNlKSA6IGZhbHNlO1xufVxuIiwiXG5jb25zdCBkZWNrID0gY2FyZERhdGE7XG5cbmZ1bmN0aW9uIHNodWZmbGUoYXJyYXkpIHtcbiAgdmFyIG0gPSBhcnJheS5sZW5ndGg7XG4gIHZhciBpO1xuICB2YXIgdDtcblxuICAvLyBXaGlsZSB0aGVyZSByZW1haW4gZWxlbWVudHMgdG8gc2h1ZmZsZeKAplxuICB3aGlsZSAobSkge1xuXG4gICAgLy8gUGljayBhIHJlbWFpbmluZyBlbGVtZW504oCmXG4gICAgaSA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIG0tLSk7XG4gICAgLy8gQW5kIHN3YXAgaXQgd2l0aCB0aGUgY3VycmVudCBlbGVtZW50LlxuICAgIHQgPSBhcnJheVttXTtcbiAgICBhcnJheVttXSA9IGFycmF5W2ldO1xuICAgIGFycmF5W2ldID0gdDtcbiAgfVxuXG4gIHJldHVybiBhcnJheTtcbn1cblxuc2h1ZmZsZShkZWNrKTtcblxuIiwiXG5cbmNvbnN0IGNhcmREYXRhID0gW1xue1xuICAgIGltZzogJ2ltYWdlcy9jYXJkcy8xMF9vZl9jbHVicy5zdmcnLFxuICAgIHZhbHVlOiAxMFxufSwge1xuICAgIGltZzogJ2ltYWdlcy9jYXJkcy8xMF9vZl9kaWFtb25kcy5zdmcnLFxuICAgIHZhbHVlOiAxMFxufSwge1xuICAgIGltZzogJ2ltYWdlcy9jYXJkcy8xMF9vZl9oZWFydHMuc3ZnJyxcbiAgICB2YWx1ZTogMTBcbn0sIHtcbiAgICBpbWc6ICdpbWFnZXMvY2FyZHMvMTBfb2Zfc3BhZGVzLnN2ZycsXG4gICAgdmFsdWU6IDEwXG59LCB7XG4gICAgaW1nOiAnaW1hZ2VzL2NhcmRzLzJfb2ZfY2x1YnMuc3ZnJyxcbiAgICB2YWx1ZTogMlxufSwge1xuICAgIGltZzogJ2ltYWdlcy9jYXJkcy8yX29mX2RpYW1vbmRzLnN2ZycsXG4gICAgdmFsdWU6IDJcbn0sIHtcbiAgICBpbWc6ICdpbWFnZXMvY2FyZHMvMl9vZl9oZWFydHMuc3ZnJyxcbiAgICB2YWx1ZTogMlxufSwge1xuICAgIGltZzogJ2ltYWdlcy9jYXJkcy8yX29mX3NwYWRlcy5zdmcnLFxuICAgIHZhbHVlOiAyXG59LCB7XG4gICAgaW1nOiAnaW1hZ2VzL2NhcmRzLzNfb2ZfY2x1YnMuc3ZnJyxcbiAgICB2YWx1ZTogM1xufSwge1xuICAgIGltZzogJ2ltYWdlcy9jYXJkcy8zX29mX2RpYW1vbmRzLnN2ZycsXG4gICAgdmFsdWU6IDNcbn0sIHtcbiAgICBpbWc6ICdpbWFnZXMvY2FyZHMvM19vZl9oZWFydHMuc3ZnJyxcbiAgICB2YWx1ZTogM1xufSwge1xuICAgIGltZzogJ2ltYWdlcy9jYXJkcy8zX29mX3NwYWRlcy5zdmcnLFxuICAgIHZhbHVlOiAzXG59LCB7XG4gICAgaW1nOiAnaW1hZ2VzL2NhcmRzLzRfb2ZfY2x1YnMuc3ZnJyxcbiAgICB2YWx1ZTogNFxufSwge1xuICAgIGltZzogJ2ltYWdlcy9jYXJkcy80X29mX2RpYW1vbmRzLnN2ZycsXG4gICAgdmFsdWU6IDRcbn0sIHtcbiAgICBpbWc6ICdpbWFnZXMvY2FyZHMvNF9vZl9oZWFydHMuc3ZnJyxcbiAgICB2YWx1ZTogNFxufSwge1xuICAgIGltZzogJ2ltYWdlcy9jYXJkcy80X29mX3NwYWRlcy5zdmcnLFxuICAgIHZhbHVlOiA0XG59LCB7XG4gICAgaW1nOiAnaW1hZ2VzL2NhcmRzLzVfb2ZfY2x1YnMuc3ZnJyxcbiAgICB2YWx1ZTogNVxufSwge1xuICAgIGltZzogJ2ltYWdlcy9jYXJkcy81X29mX2RpYW1vbmRzLnN2ZycsXG4gICAgdmFsdWU6IDVcbn0sIHtcbiAgICBpbWc6ICdpbWFnZXMvY2FyZHMvNV9vZl9oZWFydHMuc3ZnJyxcbiAgICB2YWx1ZTogNVxufSwge1xuICAgIGltZzogJ2ltYWdlcy9jYXJkcy81X29mX3NwYWRlcy5zdmcnLFxuICAgIHZhbHVlOiA1XG59LCB7XG4gICAgaW1nOiAnaW1hZ2VzL2NhcmRzLzZfb2ZfY2x1YnMuc3ZnJyxcbiAgICB2YWx1ZTogNlxufSwge1xuICAgIGltZzogJ2ltYWdlcy9jYXJkcy82X29mX2RpYW1vbmRzLnN2ZycsXG4gICAgdmFsdWU6IDZcbn0sIHtcbiAgICBpbWc6ICdpbWFnZXMvY2FyZHMvNl9vZl9oZWFydHMuc3ZnJyxcbiAgICB2YWx1ZTogNlxufSwge1xuICAgIGltZzogJ2ltYWdlcy9jYXJkcy82X29mX3NwYWRlcy5zdmcnLFxuICAgIHZhbHVlOiA2XG59LCB7XG4gICAgaW1nOiAnaW1hZ2VzL2NhcmRzLzdfb2ZfY2x1YnMuc3ZnJyxcbiAgICB2YWx1ZTogN1xufSwge1xuICAgIGltZzogJ2ltYWdlcy9jYXJkcy83X29mX2RpYW1vbmRzLnN2ZycsXG4gICAgdmFsdWU6IDdcbn0sIHtcbiAgICBpbWc6ICdpbWFnZXMvY2FyZHMvN19vZl9oZWFydHMuc3ZnJyxcbiAgICB2YWx1ZTogN1xufSwge1xuICAgIGltZzogJ2ltYWdlcy9jYXJkcy83X29mX3NwYWRlcy5zdmcnLFxuICAgIHZhbHVlOiA3XG59LCB7XG4gICAgaW1nOiAnaW1hZ2VzL2NhcmRzLzhfb2ZfY2x1YnMuc3ZnJyxcbiAgICB2YWx1ZTogOFxufSwge1xuICAgIGltZzogJ2ltYWdlcy9jYXJkcy84X29mX2RpYW1vbmRzLnN2ZycsXG4gICAgdmFsdWU6IDhcbn0sIHtcbiAgICBpbWc6ICdpbWFnZXMvY2FyZHMvOF9vZl9oZWFydHMuc3ZnJyxcbiAgICB2YWx1ZTogOFxufSwge1xuICAgIGltZzogJ2ltYWdlcy9jYXJkcy84X29mX3NwYWRlcy5zdmcnLFxuICAgIHZhbHVlOiA4XG59LCB7XG4gICAgaW1nOiAnaW1hZ2VzL2NhcmRzLzlfb2ZfY2x1YnMuc3ZnJyxcbiAgICB2YWx1ZTogOVxufSwge1xuICAgIGltZzogJ2ltYWdlcy9jYXJkcy85X29mX2RpYW1vbmRzLnN2ZycsXG4gICAgdmFsdWU6IDlcbn0sIHtcbiAgICBpbWc6ICdpbWFnZXMvY2FyZHMvOV9vZl9oZWFydHMuc3ZnJyxcbiAgICB2YWx1ZTogOVxufSwge1xuICAgIGltZzogJ2ltYWdlcy9jYXJkcy85X29mX3NwYWRlcy5zdmcnLFxuICAgIHZhbHVlOiA5XG59LCB7XG4gICAgaW1nOiAnaW1hZ2VzL2NhcmRzL2FjZV9vZl9jbHVicy5zdmcnLFxuICAgIHZhbHVlOiAxMVxuICAgIFxufSwge1xuICBpbWc6ICdpbWFnZXMvY2FyZHMvYWNlX29mX2RpYW1vbmRzLnN2ZycsXG4gICAgdmFsdWU6IDExXG4gICAgXG59LCB7XG4gICAgaW1nOiAnaW1hZ2VzL2NhcmRzL2FjZV9vZl9oZWFydHMuc3ZnJyxcbiAgICB2YWx1ZTogMTFcbiAgICBcbn0sIHtcbiAgICBpbWc6ICdpbWFnZXMvY2FyZHMvYWNlX29mX3NwYWRlcy5zdmcnLFxuICAgIHZhbHVlOiAxMVxuICAgIFxufSwge1xuICAgIGltZzogJ2ltYWdlcy9jYXJkcy9qYWNrX29mX2NsdWJzMi5zdmcnLFxuICAgIHZhbHVlOiAxMFxufSwge1xuICAgIGltZzogJ2ltYWdlcy9jYXJkcy9qYWNrX29mX2RpYW1vbmRzMi5zdmcnLFxuICAgIHZhbHVlOiAxMFxufSwge1xuICAgIGltZzogJ2ltYWdlcy9jYXJkcy9qYWNrX29mX2hlYXJ0czIuc3ZnJyxcbiAgICB2YWx1ZTogMTBcbn0sIHtcbiAgICBpbWc6ICdpbWFnZXMvY2FyZHMvamFja19vZl9zcGFkZXMyLnN2ZycsXG4gICAgdmFsdWU6IDEwXG59LCB7XG4gICAgaW1nOiAnaW1hZ2VzL2NhcmRzL2tpbmdfb2ZfY2x1YnMyLnN2ZycsXG4gICAgdmFsdWU6IDEwXG59LCB7XG4gICAgaW1nOiAnaW1hZ2VzL2NhcmRzL2tpbmdfb2ZfZGlhbW9uZHMyLnN2ZycsXG4gICAgdmFsdWU6IDEwXG59LCB7XG4gICAgaW1nOiAnaW1hZ2VzL2NhcmRzL2tpbmdfb2ZfaGVhcnRzMi5zdmcnLFxuICAgIHZhbHVlOiAxMFxufSwge1xuICAgIGltZzogJ2ltYWdlcy9jYXJkcy9raW5nX29mX3NwYWRlczIuc3ZnJyxcbiAgICB2YWx1ZTogMTBcbn0sIHtcbiAgICBpbWc6ICdpbWFnZXMvY2FyZHMvcXVlZW5fb2ZfY2x1YnMyLnN2ZycsXG4gICAgdmFsdWU6IDEwXG59LCB7XG4gICAgaW1nOiAnaW1hZ2VzL2NhcmRzL3F1ZWVuX29mX2RpYW1vbmRzMi5zdmcnLFxuICAgIHZhbHVlOiAxMFxufSwge1xuICAgIGltZzogJ2ltYWdlcy9jYXJkcy9xdWVlbl9vZl9oZWFydHMyLnN2ZycsXG4gICAgdmFsdWU6IDEwXG59LCB7XG4gICAgaW1nOiAnaW1hZ2VzL2NhcmRzL3F1ZWVuX29mX3NwYWRlczIuc3ZnJyxcbiAgICB2YWx1ZTogMTBcbn1dO1xuXG5jb25zdCB0ZXN0Q2FyZERhdGEgPSBbXG57XG4gIGltZzogJ2ltYWdlcy9jYXJkcy9hY2Vfb2ZfZGlhbW9uZHMuc3ZnJyxcbiAgICB2YWx1ZTogMTFcbiAgICBcbn0se1xuICAgIGltZzogJ2ltYWdlcy9jYXJkcy81X29mX2RpYW1vbmRzLnN2ZycsXG4gICAgdmFsdWU6IDVcbn0sIHtcbiAgICBpbWc6ICdpbWFnZXMvY2FyZHMvcXVlZW5fb2Zfc3BhZGVzMi5zdmcnLFxuICAgIHZhbHVlOiAxMFxufVxuXG5dO1xuXG5cbiBjb25zdCBwcmVsb2FkSW1hZ2UgPSB1cmwgPT4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuwqDCoMKgwqBjb25zdCBpbWcgPSBuZXcgSW1hZ2UoKTtcbsKgwqDCoMKgaW1nLnNyYyA9IHVybDtcbsKgwqDCoMKgc2V0VGltZW91dCgoKSA9PiB7XG7CoMKgwqDCoMKgwqDCoMKgaW1nLm9ubG9hZCA9IHJlc29sdmUoaW1nKTtcbsKgwqDCoMKgwqDCoMKgwqBpbWcub25lcnJvciA9IHJlamVjdDtcbsKgwqDCoMKgfSwgMTAwKVxufSk7XG5cblByb21pc2UuYWxsKGNhcmREYXRhLm1hcChjYXJkID0+IHByZWxvYWRJbWFnZShjYXJkLmltZykpKS50aGVuKHJlcyA9PiB7XG5cbsKgwqDCoMKgJCggXCIjZ2FtZVdpbmRvd1wiICkucmVtb3ZlKCk7XG5cbn0pO1xuXG5cblxuXG5cblxuXG4vLyBXb3JrIGluIHRoZSBjb25zb2xlIGZvciBub3cuIHRoZW4gYXBwZW5kIHJlc3VsdHMgaW4gZG9tLlxuXG4vLyAxLiBCdWlsZCBBcnJheSBvZiBjYXJkIE9iamVjdCwgd2l0aCBpbWFnZSBuYW1lcyBhbmQgdmFsdWVzLlxuXG4vLyAyLiBXZSB3YW50IHRvIHJldHVybiBhIG5ldyBBcnJheSwgc2h1ZmZsZWQgZGVjay5cbi8vIFdpY2ggY2FuIGVpdGhlciBiZSwgdGhhdCBpIHRha2Ugb3V0IGEgcmFuZG9tIGNhcmQsIG9yIEkgd2lsbFxuLy8gYXNzZW1ibGUgdGhlIG9yZGVyIG9mIHRoZSBkZWNrIHJhbmRvbWx5LiBcblxuLy8gMy4gRHJhdyBjYXJkIGZyb20gdG9wIG9mIHRoZSBkZWNrLlxuXG4vLyA0LiBEZWFsZXIgbG9naWNcbi8vIERlYWxlciBzaG91bGQgaGFuZCB1dCBjYXJkIHRvIHBsYXllciBvbmUgYXQgYSB0aW1lXG4vLyBTbyBmaXJzdCBvbmUgY2FyZCB0byBtZSB0aGVuIG9uZSBmYWNlIGRvd24gdG8gdGhlIERlYWxlclxuLy8gVGhlbiBhbm90aGVyIHRvIG1lIHRoZW4gYSBmYWNlLXVwIHRvIHRoZSBkZWFsZXIuXG4iLCJjb25zdCBjaGlwRGF0YSA9IHtcbsKgwqDCoMKgY2hpcF8xOiB7XG7CoMKgwqDCoMKgwqDCoMKgaW1nOiAnaW1hZ2VzL2NoaXBzL2NoaXAtMS5zdmcnLFxuwqDCoMKgwqDCoMKgwqDCoHZhbHVlOiAxLFxuICAgICAgICBjbGFzczogJ29uZSdcbsKgwqDCoMKgfSxcbsKgwqDCoMKgY2hpcF8yOiB7XG7CoMKgwqDCoMKgwqDCoMKgaW1nOiAnaW1hZ2VzL2NoaXBzL2NoaXAtMi5zdmcnLFxuwqDCoMKgwqDCoMKgwqDCoHZhbHVlOiAyLFxuICAgICAgICBjbGFzczogJ3R3bydcbsKgwqDCoMKgfSxcbsKgwqDCoMKgY2hpcF81OsKgwqB7XG7CoMKgwqDCoMKgwqDCoMKgaW1nOiAnaW1hZ2VzL2NoaXBzL2NoaXAtNS5zdmcnLFxuwqDCoMKgwqDCoMKgwqDCoHZhbHVlOiA1LFxuICAgICAgICBjbGFzczogJ2ZpdmUnXG7CoMKgwqDCoH0sXG7CoMKgwqDCoGNoaXBfMTA6IHtcbsKgwqDCoMKgwqDCoMKgwqBpbWc6ICdpbWFnZXMvY2hpcHMvY2hpcC0xMC5zdmcnLFxuwqDCoMKgwqDCoMKgwqDCoHZhbHVlOiAxMCxcbiAgICAgICAgY2xhc3M6ICd0ZW4nXG5cbsKgwqDCoMKgfSxcbsKgwqDCoMKgY2hpcF8yMDoge1xuwqDCoMKgwqDCoMKgwqDCoGltZzogJy4uL2ltYWdlcy9jaGlwcy9jaGlwLTIwLnN2ZycsXG7CoMKgwqDCoMKgwqDCoMKgdmFsdWU6IDIwLFxuwqDCoMKgwqDCoMKgwqDCoGNsYXNzOiAndHdlZW50eSdcbsKgwqDCoMKgfSxcbsKgwqDCoMKgY2hpcF81MDoge1xuwqDCoMKgwqDCoMKgwqDCoGltZzogJy4uL2ltYWdlcy9jaGlwcy9jaGlwLTUwLnN2ZycsXG7CoMKgwqDCoMKgwqDCoMKgdmFsdWU6IDUwLFxuICAgICAgICBjbGFzczogJ2ZpZnRoeSdcbsKgwqDCoMKgfSxcbsKgwqDCoMKgY2hpcF8xMDA6IHtcbsKgwqDCoMKgwqDCoMKgwqBpbWc6ICdpbWFnZXMvY2hpcHMvY2hpcC0xMDAuc3ZnJyxcbsKgwqDCoMKgwqDCoMKgwqB2YWx1ZTogMTAwLFxuICAgICAgICBjbGFzczogJ2h1bmRyZWQnXG5cbsKgwqDCoMKgfVxufTsiLCIvLyBmdW5jdGlvbiB0aGF0IGluaXRpYXRlIGFmdGVyIHVzZXIgY2xpY2tzIHN0YXJ0LlxuLy8gUmVhZHkgdG8gcGxheS5cbi8vIEFuZCBnb3Qgc29tZSBydWxlcyBhdmxpYWJsZSB0byBoaW0gb3IgaGVyLlxuJCgnLnN0YXJ0LWJ1dHRvbicpLm9uKCdjbGljaycsIGZ1bmN0aW9uKCkge1xuICAgICQoJy5zdGFydC13aW5kb3cnKS5yZW1vdmUoKTtcbiAgICAkKCcuaGl0LWJ1dHRvbicpLnJlbW92ZUF0dHIoXCJkaXNhYmxlZFwiKTtcbiAgICAkKCcuc3BsaXQtYnV0dG9uJykucmVtb3ZlQXR0cihcImRpc2FibGVkXCIpO1xuICAgICQoJy5kb3VibGUtYnV0dG9uJykucmVtb3ZlQXR0cihcImRpc2FibGVkXCIpO1xuICAgICQoJy5zdGF5LWJ1dHRvbicpLnJlbW92ZUF0dHIoXCJkaXNhYmxlZFwiKTtcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgJCgnLmFkZFN1Yi10b29sdGlwJykuYWRkQ2xhc3MoJ3Nob3ctdG9vbHRpcCcpO1xuICAgICAgICBwbGFjZUJldChtYXhCZXQpO1xuICAgICAgICBnZXRCZXRDaGlwKG1heEJldCwgZmFsc2UpO1xuICAgICAgICBcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICBkZWFsc1RvUGxheWVyKCk7XG4gICAgICAgIH0sIDQwMCk7XG5cbiAgICAgICAgc2V0VGltZW91dChkZWFsc1RvRGVhbGVyKGZhbHNlKSwgNjAwKTtcblxuICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAkKCcuYWRkU3ViLXRvb2x0aXAnKS5yZW1vdmVDbGFzcygnc2hvdy10b29sdGlwJyk7XG4gICAgICAgIH0sIDcwMCk7XG5cbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICBkZWFsc1RvUGxheWVyKCk7XG4gICAgICAgIH0sIDkwMCk7XG4gICAgICAgIFxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIGRlYWxzVG9EZWFsZXIoKTtcbiAgICAgICAgfSwgMTEwMCk7XG4gICAgIH0sIDUwMCk7XG4gICAgfSk7XG5cbiQoJy5oaXQtYnV0dG9uJykub24oJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG4gICAgXG59KTtcblxuLy8gTmVlZCB0byBjb3VudCB2YWx1ZSBpbiBkZWFsZXIgYXJyYXkuXG4kKCcuc3RheS1idXR0b24nKS5vbignY2xpY2snLCBmdW5jdGlvbigpIHtcbiAgICAgZmxpcENhcmQoKTtcbiAgICAgZ2l2ZVRvRGVhbGVyKCk7XG59KTtcblxuXG5cbi8vIFNldCBidXR0b25zIHRvIGRpc2FibGVcbiQoJy5oaXQtYnV0dG9uJykuYXR0cihcImRpc2FibGVkXCIsIFwiZGlzYWJsZWRcIik7XG4kKCcuc3BsaXQtYnV0dG9uJykuYXR0cihcImRpc2FibGVkXCIsIFwiZGlzYWJsZWRcIik7XG4kKCcuZG91YmxlLWJ1dHRvbicpLmF0dHIoXCJkaXNhYmxlZFwiLCBcImRpc2FibGVkXCIpO1xuJCgnLnN0YXktYnV0dG9uJykuYXR0cihcImRpc2FibGVkXCIsIFwiZGlzYWJsZWRcIik7XG4iLCJjb25zdCBjYXJkcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5jYXJkLWZyb250Jyk7XG5jb25zdCBjYXJkSG9sZGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2NhcmRIb2xkZXInKTtcbmNvbnN0IHNwbGl0Wm9uZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNzcGxpdFpvbmUnKTtcbmNvbnN0IGRlYWxlckNhcmRab25lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2RlYWxlckNhcmRab25lJyk7XG5cblxuLy8gTGF5IG91dCB0aGUgY2FyZHMgd2l0aCBhIGFuZCBleHRyYSBtYXJnaW4gZnJvbSB0aGUgZmlyc3QuXG4vLyBUaGVuIHJldmVyc2UgdGhlIGFycmF5IHRvIGdldCBpdCB0byBkbyBzcGxheSByaWdodCB0byBsZWZ0LlxuLy8gZnVuY3Rpb24gcnVuKCkge1xuLy8gICB2YXIgIGNvdW50ID0gLTI7XG4vLyAgIGFycmF5LnJldmVyc2UoKTtcbi8vICBmb3IgKHZhciBpID0gMDsgaSA8IGFycmF5Lmxlbmd0aDsgaSsrKSB7XG4vLyAgICAgY29uc29sZS5sb2coY291bnQtLSk7XG4vLyAgICAgYXJyYXlbaV0uc3R5bGUubWFyZ2luTGVmdCA9IFwiXCIgKyBjb3VudCArICdlbScgKyBcIlwiO1xuLy8gIH0gXG4vLyAgcmV0dXJuIGFycmF5LnJldmVyc2UoKSxcbi8vICBjYXJkSG9sZGVyLnN0eWxlLm1hcmdpbkxlZnQgPSBcIlwiICsgIGFycmF5Lmxlbmd0aCArICdlbScgKyBcIlwiLFxuLy8gIHNwbGl0Wm9uZS5zdHlsZS5tYXJnaW5MZWZ0ID0gXCJcIiArIC0oYXJyYXkubGVuZ3RoKSArICdlbScgKyBcIlwiLFxuLy8gIGRlYWxlckNhcmRab25lLnN0eWxlLm1hcmdpbkxlZnQgPSBcIlwiICsgKGFycmF5Lmxlbmd0aCkgKyAnZW0nICsgXCJcIjtcbi8vIH1cblxuXG4vLyBKcXVlcnkgd2F5IG9mIHVwZGF0aW5nIHRoZW1cblxuXG5cbi8vICQoJyNkZWFsZXJDYXJkWm9uZScpLm9uKCdjbGljaycsJyNjYXJkJywgZnVuY3Rpb24oZSkge1xuLy8gICAgIGUucHJldmVudERlZmF1bHQoKTtcblx0XG4vLyBcdCQoIHRoaXMgKS50b2dnbGVDbGFzcygnZmxpcHBlZCcpO1xuLy8gfSk7XG5cblxuXG5cblxuXG5cbiAgXG4iXX0=
