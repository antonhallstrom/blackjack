"use strict";function renderBalance(a){$("#balance").text(a+".00")}function changeTurn(){maxBet=turn++<3?20:50}function renderChip(a,e){var s=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i='\n        <div \n            class="'+e+'"\n            style="background-image: url('+a+'">\n        </div>\n  ';s?$("#splitBetZone").append(i):$("#playerBetZone").append(i)}function validateBet(a){return playerBet=a<=playerBalance&&a<=maxBet?a:0}function placeBet(a){renderBalance(playerBalance-=validateBet(a)),getOrplaceBetAnimation(a)}function getBetChip(a,e){var s=chipData["chip_"+a];return e?playerSplitBets.push(s.value):playerBets.push(s.value),renderChip(s.img,s.class,e||"")}function getOrplaceBetAnimation(a){return $(".addSub-text").text(a+".00")}function payToPlayer(){}function paysThreeToTwo(){}function paysTwoToOne(){}function getSum(a,e){return a.value+e.value}function compareHand(a){return a.reduce(getSum)}function filterAce(a){return!a.some(function(a){return 12===a})||a.reduce(getSum)-11<=21}function findBestHand(a,e){return Math.max(a,e)}function checkBestHand(a,e){return findBestHand(compareHand(a),compareHand(e))}function cardStatus(a){var e=a[0].value,s=a[1].value,i=a.reduce(function(a,e){return a+e.value},0),t=i+(a.some(function(a){return 1===a.value})?10:0),r=a.reduce(function(a,e){return a+(11===e.value)},0);return 10===e&&1===s||1===e&&10===s?"blackjack":21===t||21===i?"21":t<21||i<21?i:(t>21||i>21)&&t-10*r+validateSoftHand(r,t)<21?console.log("keep soft hand of "+(t-10*r+validateSoftHand(r,t))):console.log("bust")}function validateSoftHand(a,e){if(console.log(e),4===a||3===a||2===a||1===a)return e-10*a<21?0:10}function giveToDealer(){for(;cardStatus(dealerHand)<17;)dealsToDealer(open=!0);return console.log(cardStatus(dealerHand))}function dealsToPlayer(a){var e=deck.splice(0,1)[0];a?playerSplitHand.push(e):playerHand.push(e);var s='\n      <div id="card">\n        <figure class="card-front" style="background-image: url('+e.img+')">\n        </figure>\n        <figure class="card-back"></figure>\n      </div>\n     ';a?$("#splitZone").append(s):$("#cardHolder").append(s)}function dealsToDealer(){var a=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=deck.splice(0,1)[0];dealerHand.push(e);var s='\n      <div id="card" class="card-dealer">\n        <figure class="card-front-dealer '+(a?"open":"closed")+'">\n        </figure>\n        <figure class="card-back-dealer '+(a?"closed":"open")+'" style="background-image: url('+e.img+')"></figure>\n      </div>\n     ';$("#dealerCardZone").append(s)}function flipCard(){$("#card").addClass("flipped")}function validateSplit(a,e){a[0].value!==a[1].value&&e===!1&&playerBalance>=maxBet&&(validSplit.state=!0,placeBet(maxBet),getBetChip(maxBet,!0),playerSplitHand.push(a.splice(0,1)[0]),$("#cardHolder").children(":first-child").appendTo("#splitZone"))}function ifSplitTrue(){validSplit.state===!0&&dealsToPlayer(open=!0)+dealsToPlayer(open=!1)}function shuffle(a){for(var e,s,i=a.length;i;)e=Math.floor(Math.random()*i--),s=a[i],a[i]=a[e],a[e]=s;return a}var playerBalance=100,playerBet=0,turn=0,maxBet=20,playerBets=[],playerSplitBets=[];renderBalance(playerBalance);var cardData=[{img:"images/cards/10_of_clubs.svg",value:10},{img:"images/cards/10_of_diamonds.svg",value:10},{img:"images/cards/10_of_hearts.svg",value:10},{img:"images/cards/10_of_spades.svg",value:10},{img:"images/cards/2_of_clubs.svg",value:2},{img:"images/cards/2_of_diamonds.svg",value:2},{img:"images/cards/2_of_hearts.svg",value:2},{img:"images/cards/2_of_spades.svg",value:2},{img:"images/cards/3_of_clubs.svg",value:3},{img:"images/cards/3_of_diamonds.svg",value:3},{img:"images/cards/3_of_hearts.svg",value:3},{img:"images/cards/3_of_spades.svg",value:3},{img:"images/cards/4_of_clubs.svg",value:4},{img:"images/cards/4_of_diamonds.svg",value:4},{img:"images/cards/4_of_hearts.svg",value:4},{img:"images/cards/4_of_spades.svg",value:4},{img:"images/cards/5_of_clubs.svg",value:5},{img:"images/cards/5_of_diamonds.svg",value:5},{img:"images/cards/5_of_hearts.svg",value:5},{img:"images/cards/5_of_spades.svg",value:5},{img:"images/cards/6_of_clubs.svg",value:6},{img:"images/cards/6_of_diamonds.svg",value:6},{img:"images/cards/6_of_hearts.svg",value:6},{img:"images/cards/6_of_spades.svg",value:6},{img:"images/cards/7_of_clubs.svg",value:7},{img:"images/cards/7_of_diamonds.svg",value:7},{img:"images/cards/7_of_hearts.svg",value:7},{img:"images/cards/7_of_spades.svg",value:7},{img:"images/cards/8_of_clubs.svg",value:8},{img:"images/cards/8_of_diamonds.svg",value:8},{img:"images/cards/8_of_hearts.svg",value:8},{img:"images/cards/8_of_spades.svg",value:8},{img:"images/cards/9_of_clubs.svg",value:9},{img:"images/cards/9_of_diamonds.svg",value:9},{img:"images/cards/9_of_hearts.svg",value:9},{img:"images/cards/9_of_spades.svg",value:9},{img:"images/cards/ace_of_clubs.svg",value:11},{img:"images/cards/ace_of_diamonds.svg",value:11},{img:"images/cards/ace_of_hearts.svg",value:11},{img:"images/cards/ace_of_spades.svg",value:11},{img:"images/cards/jack_of_clubs2.svg",value:10},{img:"images/cards/jack_of_diamonds2.svg",value:10},{img:"images/cards/jack_of_hearts2.svg",value:10},{img:"images/cards/jack_of_spades2.svg",value:10},{img:"images/cards/king_of_clubs2.svg",value:10},{img:"images/cards/king_of_diamonds2.svg",value:10},{img:"images/cards/king_of_hearts2.svg",value:10},{img:"images/cards/king_of_spades2.svg",value:10},{img:"images/cards/queen_of_clubs2.svg",value:10},{img:"images/cards/queen_of_diamonds2.svg",value:10},{img:"images/cards/queen_of_hearts2.svg",value:10},{img:"images/cards/queen_of_spades2.svg",value:10}],testCardData=[{img:"images/cards/ace_of_diamonds.svg",value:11},{img:"images/cards/queen_of_spades2.svg",value:11},{img:"images/cards/ace_of_diamonds.svg",value:3},{img:"images/cards/ace_of_diamonds.svg",value:10},{img:"images/cards/ace_of_diamonds.svg",value:3}],preloadImage=function(a){return new Promise(function(e,s){var i=new Image;i.src=a,setTimeout(function(){i.onload=e(i),i.onerror=s},100)})};Promise.all(cardData.map(function(a){return preloadImage(a.img)})).then(function(a){$("#gameWindow").remove()});var chipData={chip_1:{img:"images/chips/chip-1.svg",value:1,class:"one"},chip_2:{img:"images/chips/chip-2.svg",value:2,class:"two"},chip_5:{img:"images/chips/chip-5.svg",value:5,class:"five"},chip_10:{img:"images/chips/chip-10.svg",value:10,class:"ten"},chip_20:{img:"../images/chips/chip-20.svg",value:20,class:"tweenty"},chip_50:{img:"../images/chips/chip-50.svg",value:50,class:"fifthy"},chip_100:{img:"images/chips/chip-100.svg",value:100,class:"hundred"}},playerHand=[],playerSplitHand=[],dealerHand=[],validSplit={state:!1,reset:function(){this.set=!1}};$(".split-button").on("click",function(){validateSplit(playerHand,validSplit.state)}),$(".hit-button").on("click",function(){ifSplitTrue()}),$(".start-button").on("click",function(){$(".start-window").remove(),$(".hit-button").removeAttr("disabled"),$(".split-button").removeAttr("disabled"),$(".double-button").removeAttr("disabled"),$(".stay-button").removeAttr("disabled"),setTimeout(function(){$(".addSub-tooltip").addClass("show-tooltip"),placeBet(maxBet),getBetChip(maxBet,!1),setTimeout(function(){dealsToPlayer()},400),setTimeout(dealsToDealer(!1),600),setTimeout(function(){$(".addSub-tooltip").removeClass("show-tooltip")},700),setTimeout(function(){dealsToPlayer()},900),setTimeout(function(){dealsToDealer()},1100)},500)}),$(".stay-button").on("click",function(){flipCard(),giveToDealer()}),$(".hit-button").attr("disabled","disabled"),$(".split-button").attr("disabled","disabled"),$(".double-button").attr("disabled","disabled"),$(".stay-button").attr("disabled","disabled");var cards=document.querySelectorAll(".card-front"),cardHolder=document.querySelector("#cardHolder"),splitZone=document.querySelector("#splitZone"),dealerCardZone=document.querySelector("#dealerCardZone"),deck=cardData;shuffle(deck),$(function(){$("#draggable").draggable()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImJhbGFuY2UuanMiLCJjYWxjSGFuZC5qcyIsImRlYWxlci5qcyIsInNodWZmbGUuanMiLCJjYXJkRGF0YS5qcyIsImNoaXBEYXRhLmpzIiwicnVuR2FtZS5qcyIsInNjcm9sbC5qcyIsInRvb2x0aXAuanMiXSwibmFtZXMiOlsicmVuZGVyQmFsYW5jZSIsInBsYXllckJhbGFuY2UiLCIkIiwidGV4dCIsImNoYW5nZVR1cm4iLCJtYXhCZXQiLCJ0dXJuIiwicmVuZGVyQ2hpcCIsImNoaXBJbWciLCJjaGlwQ2xhc3MiLCJzcGxpdCIsImFyZ3VtZW50cyIsImxlbmd0aCIsInVuZGVmaW5lZCIsImNoaXBFbGVtZW50IiwiYXBwZW5kIiwidmFsaWRhdGVCZXQiLCJiZXQiLCJwbGF5ZXJCZXQiLCJwbGFjZUJldCIsImdldE9ycGxhY2VCZXRBbmltYXRpb24iLCJnZXRCZXRDaGlwIiwiY2hpcCIsImNoaXBEYXRhIiwicGxheWVyU3BsaXRCZXRzIiwicHVzaCIsInZhbHVlIiwicGxheWVyQmV0cyIsImltZyIsImNsYXNzIiwicGF5VG9QbGF5ZXIiLCJwYXlzVGhyZWVUb1R3byIsInBheXNUd29Ub09uZSIsImdldFN1bSIsImFjYyIsImN1ciIsImNvbXBhcmVIYW5kIiwiYXJyIiwicmVkdWNlIiwiZmlsdGVyQWNlIiwic29tZSIsImUiLCJmaW5kQmVzdEhhbmQiLCJoYW5kQSIsImhhbmRCIiwiTWF0aCIsIm1heCIsImNoZWNrQmVzdEhhbmQiLCJjYXJkU3RhdHVzIiwicGxheWVyQ2FyZHMiLCJmaXJzdENhcmRWYWx1ZSIsInNlY29uZENhcmRWYWx1ZSIsInRvdGFsVmFsdWUiLCJsYXN0IiwiY3VycmVudCIsInRvdGFsVmFsdWVXaXRoQWNlIiwiY2FyZCIsImNvdW50IiwidmFsaWRhdGVTb2Z0SGFuZCIsImNvbnNvbGUiLCJsb2ciLCJnaXZlVG9EZWFsZXIiLCJkZWFsZXJIYW5kIiwiZGVhbHNUb0RlYWxlciIsIm9wZW4iLCJkZWFsc1RvUGxheWVyIiwiZGVjayIsInNwbGljZSIsInBsYXllclNwbGl0SGFuZCIsInBsYXllckhhbmQiLCJjYXJkTWFya3VwIiwiZmxpcENhcmQiLCJhZGRDbGFzcyIsInZhbGlkYXRlU3BsaXQiLCJhcnJheSIsIm1heFNwbGl0IiwidmFsaWRTcGxpdCIsInN0YXRlIiwiY2hpbGRyZW4iLCJhcHBlbmRUbyIsImlmU3BsaXRUcnVlIiwic2h1ZmZsZSIsImkiLCJ0IiwibSIsImZsb29yIiwicmFuZG9tIiwiY2FyZERhdGEiLCJ0ZXN0Q2FyZERhdGEiLCJwcmVsb2FkSW1hZ2UiLCJ1cmwiLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsIkltYWdlIiwic3JjIiwic2V0VGltZW91dCIsIm9ubG9hZCIsIm9uZXJyb3IiLCJhbGwiLCJtYXAiLCJ0aGVuIiwicmVzIiwicmVtb3ZlIiwiY2hpcF8xIiwiY2hpcF8yIiwiY2hpcF81IiwiY2hpcF8xMCIsImNoaXBfMjAiLCJjaGlwXzUwIiwiY2hpcF8xMDAiLCJyZXNldCIsInRoaXMiLCJzZXQiLCJvbiIsInJlbW92ZUF0dHIiLCJyZW1vdmVDbGFzcyIsImF0dHIiLCJjYXJkcyIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvckFsbCIsImNhcmRIb2xkZXIiLCJxdWVyeVNlbGVjdG9yIiwic3BsaXRab25lIiwiZGVhbGVyQ2FyZFpvbmUiLCJkcmFnZ2FibGUiXSwibWFwcGluZ3MiOiJZQVFBLFNBQVNBLGVBQWNDLEdBQ25CQyxFQUFFLFlBQVlDLEtBQUtGLEVBQWdCLE9BR3ZDLFFBQVNHLGNBQ0xDLE9BQVNDLE9BQVMsRUFBSSxHQUFLLEdBRy9CLFFBQVNDLFlBQVdDLEVBQVNDLEdBQTBCLEdBQWZDLEdBQWVDLFVBQUFDLE9BQUEsR0FBQUMsU0FBQUYsVUFBQSxJQUFBQSxVQUFBLEdBQzdDRyxFQUFBQSx1Q0FFV0wsRUFGWCwrQ0FHaUNELEVBSGpDLHdCQU1ORSxHQUFRUixFQUFFLGlCQUFpQmEsT0FBT0QsR0FBZVosRUFBRSxrQkFBa0JhLE9BQU9ELEdBSWhGLFFBQVNFLGFBQVlDLEdBQ2pCLE1BQU9D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RixNQUFPLElBRVBFLElBQUssK0JBQ0xGLE1BQU8sSUFFUEUsSUFBSywrQkFDTEYsTUFBTyxJQUVQRSxJQUFLLDhCQUNMRixNQUFPLElBRVBFLElBQUssaUNBQ0xGLE1BQU8sSUFFUEUsSUFBSywrQkFDTEYsTUFBTyxJQUVQRSxJQUFLLCtCQUNMRixNQUFPLElBRVBFLElBQUssOEJBQ0xGLE1BQU8sSUFFUEUsSUFBSyxpQ0FDTEYsTUFBTyxJQUVQRSxJQUFLLCtCQUNMRixNQUFPLElBRVBFLElBQUssK0JBQ0xGLE1BQU8sSUFFUEUsSUFBSyw4QkFDTEYsTUFBTyxJQUVQRSxJQUFLLGlDQUNMRixNQUFPLElBRVBFLElBQUssK0JBQ0xGLE1BQU8sSUFFUEUsSUFBSywrQkFDTEYsTUFBTyxJQUVQRSxJQUFLLDhCQUNMRixNQUFPLElBRVBFLElBQUssaUNBQ0xGLE1BQU8sSUFFUEUsSUFBSywrQkFDTEYsTUFBTyxJQUVQRSxJQUFLLCtCQUNMRixNQUFPLElBRVBFLElBQUssOEJBQ0xGLE1BQU8sSUFFUEUsSUFBSyxpQ0FDTEYsTUFBTyxJQUVQRSxJQUFLLCtCQUNMRixNQUFPLElBRVBFLElBQUssK0JBQ0xGLE1BQU8sSUFFUEUsSUFBSyw4QkFDTEYsTUFBTyxJQUVQRSxJQUFLLGlDQUNMRixNQUFPLElBRVBFLElBQUssK0JBQ0xGLE1BQU8sSUFFUEUsSUFBSywrQkFDTEYsTUFBTyxJQUVQRSxJQUFLLGdDQUNMRixNQUFPLEtBR1RFLElBQUssbUNBQ0hGLE1BQU8sS0FHUEUsSUFBSyxpQ0FDTEYsTUFBTyxLQUdQRSxJQUFLLGlDQUNMRixNQUFPLEtBR1BFLElBQUssa0NBQ0xGLE1BQU8sS0FFUEUsSUFBSyxxQ0FDTEYsTUFBTyxLQUVQRSxJQUFLLG1DQUNMRixNQUFPLEtBRVBFLElBQUssbUNBQ0xGLE1BQU8sS0FFUEUsSUFBSyxrQ0FDTEYsTUFBTyxLQUVQRSxJQUFLLHFDQUNMRixNQUFPLEtBRVBFLElBQUssbUNBQ0xGLE1BQU8sS0FFUEUsSUFBSyxtQ0FDTEYsTUFBTyxLQUVQRSxJQUFLLG1DQUNMRixNQUFPLEtBRVBFLElBQUssc0NBQ0xGLE1BQU8sS0FFUEUsSUFBSyxvQ0FDTEYsTUFBTyxLQUVQRSxJQUFLLG9DQUNMRixNQUFPLEtBR0w4RCxlQUVKNUQsSUFBSyxtQ0FDSEYsTUFBTyxLQUdQRSxJQUFLLG9DQUNMRixNQUFPLEtBRVRFLElBQUssbUNBQ0hGLE1BQU8sSUFHVEUsSUFBSyxtQ0FDSEYsTUFBTyxLQUdURSxJQUFLLG1DQUNIRixNQUFPLElBT0orRCxhQUFlLFNBQUFDLEdBQUEsTUFBTyxJQUFJQyxTQUFRLFNBQUNDLEVBQVNDLEdBQy9DLEdBQU1qRSxHQUFNLEdBQUlrRSxNQUNoQmxFLEdBQUltRSxJQUFNTCxFQUNWTSxXQUFXLFdBQ1BwRSxFQUFJcUUsT0FBU0wsRUFBUWhFLEdBQ3JCQSxFQUFJc0UsUUFBVUwsR0FDZixPQUdQRixTQUFRUSxJQUFJWixTQUFTYSxJQUFJLFNBQUE1QyxHQUFBLE1BQVFpQyxjQUFhakMsRUFBSzVCLFFBQU95RSxLQUFLLFNBQUFDLEdBRTNEcEcsRUFBRyxlQUFnQnFHLFVDek12QixJQUFNaEYsV0FDRmlGLFFBQ0k1RSxJQUFLLDBCQUNMRixNQUFPLEVBQ1BHLE1BQU8sT0FFWDRFLFFBQ0k3RSxJQUFLLDBCQUNMRixNQUFPLEVBQ1BHLE1BQU8sT0FFWDZFLFFBQ0k5RSxJQUFLLDBCQUNMRixNQUFPLEVBQ1BHLE1BQU8sUUFFWDhFLFNBQ0kvRSxJQUFLLDJCQUNMRixNQUFPLEdBQ1BHLE1BQU8sT0FHWCtFLFNBQ0loRixJQUFLLDhCQUNMRixNQUFPLEdBQ1BHLE1BQU8sV0FFWGdGLFNBQ0lqRixJQUFLLDhCQUNMRixNQUFPLEdBQ1BHLE1BQU8sVUFFWGlGLFVBQ0lsRixJQUFLLDRCQUNMRixNQUFPLElBQ1BHLE1BQU8sWUh4Qlh3QyxjQUNBRCxtQkFDQU4sY0FHRWMsWUFFRkMsT0FBTyxFQUVQa0MsTUFKZSxXQUtaQyxLQUFLQyxLQUFNLEdBOERsQi9HLEdBQUUsaUJBQWlCZ0gsR0FBRyxRQUFTLFdBQzNCekMsY0FBY0osV0FBWU8sV0FBV0MsU0FLekMzRSxFQUFFLGVBQWVnSCxHQUFHLFFBQVMsV0FDekJsQyxnQkl2Rko5RSxFQUFFLGlCQUFpQmdILEdBQUcsUUFBUyxXQUMzQmhILEVBQUUsaUJBQWlCcUcsU0FDbkJyRyxFQUFFLGVBQWVpSCxXQUFXLFlBQzVCakgsRUFBRSxpQkFBaUJpSCxXQUFXLFlBQzlCakgsRUFBRSxrQkFBa0JpSCxXQUFXLFlBQy9CakgsRUFBRSxnQkFBZ0JpSCxXQUFXLFlBQzdCbkIsV0FBVyxXQUNQOUYsRUFBRSxtQkFBbUJzRSxTQUFTLGdCQUM5QnJELFNBQVNkLFFBQ1RnQixXQUFXaEIsUUFBUSxHQUVuQjJGLFdBQVcsV0FDUC9CLGlCQUNELEtBRUgrQixXQUFXakMsZUFBYyxHQUFRLEtBRWhDaUMsV0FBVyxXQUNSOUYsRUFBRSxtQkFBbUJrSCxZQUFZLGlCQUNsQyxLQUVIcEIsV0FBVyxXQUNQL0IsaUJBQ0QsS0FFSCtCLFdBQVcsV0FDUGpDLGlCQUNELE9BQ0gsT0FNUjdELEVBQUUsZ0JBQWdCZ0gsR0FBRyxRQUFTLFdBQ3pCM0MsV0FDQVYsaUJBTUwzRCxFQUFFLGVBQWVtSCxLQUFLLFdBQVksWUFDbENuSCxFQUFFLGlCQUFpQm1ILEtBQUssV0FBWSxZQUNwQ25ILEVBQUUsa0JBQWtCbUgsS0FBSyxXQUFZLFlBQ3JDbkgsRUFBRSxnQkFBZ0JtSCxLQUFLLFdBQVksV0NoRG5DLElBQU1DLE9BQVFDLFNBQVNDLGlCQUFpQixlQUNsQ0MsV0FBYUYsU0FBU0csY0FBYyxlQUNwQ0MsVUFBWUosU0FBU0csY0FBYyxjQUNuQ0UsZUFBaUJMLFNBQVNHLGNBQWMsbUJKRnhDeEQsS0FBT3FCLFFBcUJiTixTQUFRZixNS3JCUmhFLEVBQUcsV0FDQ0EsRUFBRyxjQUFlMkgiLCJmaWxlIjoiYWxsLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImxldCBwbGF5ZXJCYWxhbmNlID0gMTAwO1xubGV0IHBsYXllckJldCA9IDA7XG5sZXQgdHVybiA9IDA7XG5sZXQgbWF4QmV0ID0gMjA7XG5sZXQgcGxheWVyQmV0cyA9IFtdO1xubGV0IHBsYXllclNwbGl0QmV0cyA9IFtdO1xucmVuZGVyQmFsYW5jZShwbGF5ZXJCYWxhbmNlKTtcblxuZnVuY3Rpb24gcmVuZGVyQmFsYW5jZShwbGF5ZXJCYWxhbmNlKSB7XG7CoMKgwqDCoCQoJyNiYWxhbmNlJykudGV4dChwbGF5ZXJCYWxhbmNlICsgJy4wMCcpO1xufVxuXG5mdW5jdGlvbiBjaGFuZ2VUdXJuKCkge1xuwqDCoMKgwqBtYXhCZXQgPSB0dXJuKysgPCAzID8gMjAgOiA1MDtcbn1cblxuZnVuY3Rpb24gcmVuZGVyQ2hpcChjaGlwSW1nLCBjaGlwQ2xhc3MsIHNwbGl0ID0gZmFsc2UpIHtcbsKgwqDCoMKgY29uc3QgY2hpcEVsZW1lbnQgPSBgXG4gICAgICAgIDxkaXYgXG4gICAgICAgICAgICBjbGFzcz1cIiR7Y2hpcENsYXNzfVwiXG7CoMKgwqDCoCAgICAgICAgc3R5bGU9XCJiYWNrZ3JvdW5kLWltYWdlOiB1cmwoJHtjaGlwSW1nfVwiPlxuICAgICAgICA8L2Rpdj5cbiAgYDtcbsKgICDCoHNwbGl0ID8gJCgnI3NwbGl0QmV0Wm9uZScpLmFwcGVuZChjaGlwRWxlbWVudCkgOiAkKCcjcGxheWVyQmV0Wm9uZScpLmFwcGVuZChjaGlwRWxlbWVudCk7XG5cbn1cblxuZnVuY3Rpb24gdmFsaWRhdGVCZXQoYmV0KSB7XG7CoMKgwqDCoHJldHVybiBwbGF5ZXJCZXQgPSAoYmV0IDw9IHBsYXllckJhbGFuY2UgJiYgYmV0IDw9IG1heEJldCkgPyBiZXQgOiAwO1xufVxuXG5mdW5jdGlvbiBwbGFjZUJldChiZXQpIHtcbsKgwqDCoMKgcmVuZGVyQmFsYW5jZShwbGF5ZXJCYWxhbmNlID0gcGxheWVyQmFsYW5jZSAtIHZhbGlkYXRlQmV0KGJldCkpLFxuICAgIGdldE9ycGxhY2VCZXRBbmltYXRpb24oYmV0KTtcbn1cblxuZnVuY3Rpb24gZ2V0QmV0Q2hpcChiZXQsIHNwbGl0KSB7XG7CoMKgwqDCoGNvbnN0IGNoaXAgPSBjaGlwRGF0YVtgY2hpcF8ke2JldH1gXTtcbiAgICBzcGxpdCA/IHBsYXllclNwbGl0QmV0cy5wdXNoKGNoaXAudmFsdWUpIDogcGxheWVyQmV0cy5wdXNoKGNoaXAudmFsdWUpO1xuwqDCoMKgwqByZXR1cm4gcmVuZGVyQ2hpcChjaGlwLmltZywgY2hpcC5jbGFzcywgc3BsaXQgfHwgJycpO1xufTtcblxuZnVuY3Rpb24gZ2V0T3JwbGFjZUJldEFuaW1hdGlvbihiZXQpIHtcbiAgICByZXR1cm4gJCgnLmFkZFN1Yi10ZXh0JykudGV4dChiZXQgKyAnLjAwJyk7XG59XG5cbmZ1bmN0aW9uIHBheVRvUGxheWVyKCkge1xuICAgIFxufVxuXG4vLyBCbGFja0phY2tcbmZ1bmN0aW9uIHBheXNUaHJlZVRvVHdvKCkge1xuICAgIFxufVxuXG4vLyBJbnN1cmFuY2VcbmZ1bmN0aW9uIHBheXNUd29Ub09uZSgpIHtcbiAgICBcbn1cblxuXG4vLyBTUExJVFRJTkcgXG4vLyBIYXMgdG8gYmUgZXF1YWwgdG8gbXkgYW1vdXQuXG5cbi8vIERPVUJMSU5HXG4vLyBJZiB5b3VyIGZpcnN0IDIgY2FyZHMgPSBhIDksIDEwIG9yIDExLiB5b3UgbWF5XG4vLyBkb3VibGluZyBkb3duLCB3aXRoIGEgPSBvciA+IGFtb3VudC5cbi8vIGlmIHdpbiB3aWxsIGdldCBwYWlkIGZvciAyIGFuZCBsb3NlIGxvc2UgMlxuLy8gaWYgZG91YmxpbmcgZG93biBvciAxMiBvciBoaWdoZXIsIGFyZSBlaXRoZXIgd2FzdGVkIG9yIGNoZWF0aW5nLlxuXG5cblxuLy8gSElUVElOR1xuLy8geW91IGFyZSBhbG91ZCB0byBoaXQgdW50aWwgeW91IGdldCAxOC0yMSBvciB1bnRpbCBidXN0LlxuLy8geW91IGNhbiBoaXQgaWYgeW91IDEtMTcgc2V2ZW50ZWVuXG5cbi8vIEJ1dCBpZiBJIHdpbGwgYmUgcGFpZCBpbiBjaGlwcywgc2F5IGxpa2UgNDAuXG4vLyBIb3cgd291bGQgaSByZW5kZXIgdGhhdCBsb2dpYyBvdXQuXG5cblxuLy8gY29uc3QgcGxheWVyQmFsYW5jZSA9IDEwMDtcbi8vIGNvbnN0IGJldHNJblBsYXllclpvbmUgPSBbXTtcbi8vIGNvbnN0IHR1cm4gPSAwO1xuLy8gbGV0IGJldCA9IDIwO1xuLy8gLy8gQW5pbWF0aW9uIG9uIGxvYWQsIHNvIG51bWJlcnMgdGljayB1cD9cblxuLy8gJCgnI2JhbGFuY2UnKS50ZXh0KHBsYXllckJhbGFuY2UgKyAnLjAwJyk7XG5cblxuLy8gLy8gZnVuY3Rpb24gcGxhY2UgaW5pdGFsIGJldC5cbi8vIC8vIHRoZW4gcmFpc2UgYmV0IGFmdGVyIDMgdHVybnMuXG5cbi8vIC8vIEZ1bmN0aW9uIHRoYXQgcGxhY2UgYmV0XG4vLyAvLyBmdW5jdGlvbiB0aGF0IGNhbiBzcGxpdCBiZXQgaW50byBiZXR6b25lXG5cbi8vIC8vIEJldCAyMCBhcyBhIG1pbmltdW0sIHdoZW4gXG4vLyBmdW5jdGlvbiBpbml0YWxCZXQoKSB7XG4vLyAgdHVybiA8IDMgPyBiZXQgPSAyMCA6IGJldCA9IDUwO1xuLy8gLy8gIHJldHVybiBwbGFjZUJldChiZXQpXG4vLyB9XG5cbi8vIGZ1bmN0aW9uIGluaXRhbEJldCgpIHtcbi8vICByZXR1cm4gYmV0ID0gdHVybiA8IDMgPyAyMCA6IDUwO1xuLy8gIC8vcmV0dXJuIHBsYWNlQmV0KGJldClcbi8vIH1cblxuLy8gLy8gUmVuZGVyIGNoaXBcbi8vIGZ1bmN0aW9uIHJlbmRlckNoaXAoY2hpcEltZywgY2hpcENsYXNzKSB7XG4vLyAgICAgY29uc3QgY2hpcE1hcmt1cCA9IGBcbi8vICAgICA8ZGl2IGNsYXNzPVwiJHtjaGlwQ2xhc3N9XCIgc3R5bGU9XCJiYWNrZ3JvdW5kLWltYWdlOiB1cmwoJHtjaGlwSW1nfVwiPlxuLy8gICAgIDwvZGl2PlxuLy8gICAgIGA7XG4vLyAgICAgJCgnI3BsYXllckJldFpvbmUnKS5hcHBlbmQoY2hpcE1hcmt1cCk7XG4vLyAgICAgY29uc29sZS5sb2coY2hpcE1hcmt1cCk7XG4vLyB9XG4vLyAvLyBGaXggc28gdGhhdCB0aGUgdmFsdWUgY2FudCBiZSBmdWNrZWQgdXBcbi8vIGZ1bmN0aW9uIHBsYWNlQmV0KHZhbHVlKSB7XG4vLyBwbGF5ZXJCYWxhbmNlID0gTnVtYmVyKHBsYXllckJhbGFuY2UpIC0gdmFsdWU7XG4vLyAkKCcjYmFsYW5jZScpLnRleHQocGxheWVyQmFsYW5jZSArICcuMDAnKTtcbi8vIH1cblxuLy8gZnVuY3Rpb24gZ2V0QmV0Q2hpcCgpIHtcbi8vICAgICBsZXQgeCwgeTtcbi8vICAgICBjaGlwRGF0YS5mb3JFYWNoKGZ1bmN0aW9uKGUpIHtcbi8vICAgICAgICAgaWYoZS52YWx1ZSA9PT0gYmV0KSB7XG4vLyAgICAgICAgIHJldHVybiB4ID0gZS5pbWcsIHkgPSBlLmNsYXNzLCBiZXRzSW5QbGF5ZXJab25lLnB1c2goZS52YWx1ZSk7XG4vLyAgICAgfVxuLy8gICAgIH0pO1xuLy8gIHJldHVybiByZW5kZXJDaGlwKHgsIHkpO1xuLy8gfTsiLCJcblxuXG5mdW5jdGlvbiBnZXRTdW0oYWNjLCBjdXIpIHtcbiAgICByZXR1cm4gYWNjLnZhbHVlICsgY3VyLnZhbHVlO1xufVxuXG5mdW5jdGlvbiBjb21wYXJlSGFuZChhcnIpIHtcbiAgICByZXR1cm4gYXJyLnJlZHVjZShnZXRTdW0pO1xufVxuXG5cbmZ1bmN0aW9uIGZpbHRlckFjZShhcnIpIHtcbiAgICBjb25zdCBzdW0gPSBhcnI7XG4gICAgaWYoYXJyLnNvbWUoKGUpID0+IGUgPT09IDEyKSkge1xuICAgICAgICByZXR1cm4gKGFyci5yZWR1Y2UoZ2V0U3VtKSAtIDExIDw9IDIxKTtcbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG59XG5cblxuZnVuY3Rpb24gZmluZEJlc3RIYW5kKGhhbmRBLCBoYW5kQikge1xuICAgIHJldHVybiBNYXRoLm1heChoYW5kQSwgaGFuZEIpO1xufVxuXG5mdW5jdGlvbiBjaGVja0Jlc3RIYW5kKGhhbmRBLCBoYW5kQikge1xuICByZXR1cm4gZmluZEJlc3RIYW5kKGNvbXBhcmVIYW5kKGhhbmRBKSwgY29tcGFyZUhhbmQoaGFuZEIpKTtcbn1cblxuXG5mdW5jdGlvbiBjYXJkU3RhdHVzKHBsYXllckNhcmRzKSB7XG7CoMKgY29uc3QgZmlyc3RDYXJkVmFsdWUgPSBwbGF5ZXJDYXJkc1swXS52YWx1ZTtcbsKgwqBjb25zdCBzZWNvbmRDYXJkVmFsdWUgPSBwbGF5ZXJDYXJkc1sxXS52YWx1ZTtcbsKgwqBjb25zdCB0b3RhbFZhbHVlID0gcGxheWVyQ2FyZHMucmVkdWNlKChsYXN0LCBjdXJyZW50KSA9PiBsYXN0ICsgY3VycmVudC52YWx1ZSwgMCk7XG7CoMKgY29uc3QgdG90YWxWYWx1ZVdpdGhBY2UgPSB0b3RhbFZhbHVlICsgKHBsYXllckNhcmRzLnNvbWUoY2FyZCA9PiBjYXJkLnZhbHVlID09PSAxKSA/IDEwIDogMCk7XG4gIGNvbnN0IGNvdW50ID0gcGxheWVyQ2FyZHMucmVkdWNlKGZ1bmN0aW9uKGFjYywgY3VyKSB7XG4gICAgcmV0dXJuIGFjYyArIChjdXIudmFsdWUgPT09IDExKTtcbiAgfSwgMCk7XG7CoMKgaWYgKGZpcnN0Q2FyZFZhbHVlID09PSAxMCAmJiBzZWNvbmRDYXJkVmFsdWUgPT09IDEgfHxcbsKgwqDCoMKgICBmaXJzdENhcmRWYWx1ZSA9PT0gMSAmJiBzZWNvbmRDYXJkVmFsdWUgPT09IDEwKSByZXR1cm4gJ2JsYWNramFjayc7XG7CoMKgaWYgKHRvdGFsVmFsdWVXaXRoQWNlID09PSAyMSB8fCB0b3RhbFZhbHVlID09PSAyMSkgcmV0dXJuICcyMSc7XG7CoMKgaWYgKHRvdGFsVmFsdWVXaXRoQWNlIDwgMjEgfHwgdG90YWxWYWx1ZSA8IDIxKSByZXR1cm4gJ2tlZXAgZ29pbmc/JywgdG90YWxWYWx1ZTtcbsKgwqBpZiAodG90YWxWYWx1ZVdpdGhBY2UgPiAyMSB8fCB0b3RhbFZhbHVlID4gMjEpIHtcbiAgICAgaWYoKHRvdGFsVmFsdWVXaXRoQWNlIC0gKGNvdW50ICogMTApICsgdmFsaWRhdGVTb2Z0SGFuZChjb3VudCwgdG90YWxWYWx1ZVdpdGhBY2UpKSA8IDIxKSB7XG4gICAgICAgIHJldHVybiBjb25zb2xlLmxvZyhga2VlcCBzb2Z0IGhhbmQgb2YgJHt0b3RhbFZhbHVlV2l0aEFjZSAtIChjb3VudCAqIDEwKSArIHZhbGlkYXRlU29mdEhhbmQoY291bnQsIHRvdGFsVmFsdWVXaXRoQWNlKX1gKTtcbiAgICB9ICBlbHNlIHJldHVybiBjb25zb2xlLmxvZyhcImJ1c3RcIik7XG4gIH0gZWxzZSByZXR1cm4gY29uc29sZS5sb2coXCJidXN0XCIpO1xufVxuXG5mdW5jdGlvbiB2YWxpZGF0ZVNvZnRIYW5kKGNvdW50LHRvdGFsVmFsdWVXaXRoQWNlKSB7XG4gICAgY29uc29sZS5sb2codG90YWxWYWx1ZVdpdGhBY2UpO1xuICAgIGlmKGNvdW50ID09PSA0IHx8IGNvdW50ID09PSAzIHx8IGNvdW50ID09PSAyIHx8IGNvdW50ID09PSAxKSB7XG4gICAgICAgIGlmKCh0b3RhbFZhbHVlV2l0aEFjZSAtIChjb3VudCAqIDEwKSkgPCAyMSkge1xuICAgICAgICAgICAgcmV0dXJuICAwO1xuICAgICAgICB9IHJldHVybiAxMDtcbiAgICB9IFxufVxuXG5cblxuZnVuY3Rpb24gZ2l2ZVRvRGVhbGVyKCkge1xuICAgIHdoaWxlIChjYXJkU3RhdHVzKGRlYWxlckhhbmQpIDwgMTcpIHtcbiAgICAgICAgICBkZWFsc1RvRGVhbGVyKG9wZW4gPSB0cnVlKTtcbiAgICB9XG4gICAgcmV0dXJuIGNvbnNvbGUubG9nKGNhcmRTdGF0dXMoZGVhbGVySGFuZCkpO1xufVxuXG4vLyBjb21wYXJlIHBsYXllckhhbmQsIHdpdGggdGhlIGNhcmQgc3RhdHVzLlxuLy8gaWYgdGhpcyBjYXJkU3RhdHVzIHdpbm5lciBvciBsb3NlLlxuLy8gQWxzbyB0byBjb25jaWRlciBhY2UgYWNlIDEwLCAzIDExLCAxNC4gY2hlY2sgZm9yIGVhY2ggLTEwLCBpZiB1bmRlciA8IDIxLiwgd2hpbGUgbG9vcC5cbi8vIGNoZWNrIGZvciB3aW4sIGlmIGhhbmQgYWNlLiBjb3VudCwgdXAgPCAyMS4gdGhhdHMgaXRzIHRvdGFsIHZhbHVlLlxuXG4vLyBkZWFsc1RvRGVhbGVyKG9wZW4gPSB0cnVlKTtcblxuXG4vLyByZWN1cnNpb25cbi8vIGZ1bmN0aW9uIGdpdmVUb0RlYWxlcigpIHtcbi8vICAgICBpZiAoY2FyZFN0YXR1cyhkZWFsZXJIYW5kKSA8IDE3KSB7XG4vLyAgICAgICAgICBkZWFsc1RvRGVhbGVyKG9wZW4gPSB0cnVlKTtcbi8vICAgICAgICAgIHJldHVybiAgZ2l2ZVRvRGVhbGVyKCk7XG4vLyAgICAgfSBlbHNlIGNvbnNvbGUubG9nKGNhcmRTdGF0dXMoZGVhbGVySGFuZCkpO1xuLy8gfTtcblxuXG4iLCIvLyA0LiBEZWFsZXIgbG9naWNcbi8vIERlYWxlciBzaG91bGQgaGFuZCB1dCBjYXJkIHRvIHBsYXllciBvbmUgYXQgYSB0aW1lXG4vLyBTbyBmaXJzdCBvbmUgY2FyZCB0byBtZSB0aGVuIG9uZSBmYWNlIGRvd24gdG8gdGhlIERlYWxlclxuLy8gVGhlbiBhbm90aGVyIHRvIG1lIHRoZW4gYSBmYWNlLXVwIHRvIHRoZSBkZWFsZXIuXG5cbi8vIHdlIHdpbGwgc3BsaWNlKDAsIDEpIHRvIGRyYXcgYSBjYXJkLlxuXG4vLyBIb3cgdG8gcGxhY2UgYSBjYXJkIHRvIHRoZSBwbGF5ZXIuXG5cbi8vIEhvdyB0byBwbGFjZSBhIGNhcmQgdG8gdGhlIGRlYWxlciBmYWNlLWRvd24uXG5cbmxldCBwbGF5ZXJIYW5kID0gW107XG5sZXQgcGxheWVyU3BsaXRIYW5kID0gW107XG5sZXQgZGVhbGVySGFuZCA9IFtdO1xuXG5cbmNvbnN0IHZhbGlkU3BsaXQgPSB7XG4gICAgXG4gICAgc3RhdGU6IGZhbHNlLFxuICAgXG4gICAgcmVzZXQoKSB7XG4gICAgICAgdGhpcy5zZXQgPSBmYWxzZTtcbiAgICB9XG59O1xuXG4vLyBwbGF5ZXJIYW5kLnB1c2goY2FyZCk7IFxuLy8gRGVhbHMgdG8gcGxheWVycyBoYW5kLCBub3cgd2UgY2FuIGtlZXAgdHJhY2sgb2YgdGhlIG9yZGVyIG9mIGNhcmRzLiBkZWFsdC5cbi8vIEFuZCB3aGF0IGNhcmRzIGJlbG9uZyB0byBwbGF5ZXIuXG5cblxuZnVuY3Rpb24gZGVhbHNUb1BsYXllcihzcGxpdCkge1xuICAgIC8vIERlYWxzIHRvcCBjYXJkIHRvIHBsYXllciwgIW5lZWQgdG8gY2hlY2sgaWYgdXNlciBuZWVkcyBzcGxpdC5cbiAgICAgY29uc3QgY2FyZCA9IGRlY2suc3BsaWNlKDAsMSlbMF07XG4gICAgIHNwbGl0ID8gcGxheWVyU3BsaXRIYW5kLnB1c2goY2FyZCkgOiBwbGF5ZXJIYW5kLnB1c2goY2FyZCk7XG4gICAgIC8vIENyZWF0aW5nIGEgY2FyZFxuICAgICBjb25zdCBjYXJkTWFya3VwID0gYFxuICAgICAgPGRpdiBpZD1cImNhcmRcIj5cbiAgICAgICAgPGZpZ3VyZSBjbGFzcz1cImNhcmQtZnJvbnRcIiBzdHlsZT1cImJhY2tncm91bmQtaW1hZ2U6IHVybCgke2NhcmQuaW1nfSlcIj5cbiAgICAgICAgPC9maWd1cmU+XG4gICAgICAgIDxmaWd1cmUgY2xhc3M9XCJjYXJkLWJhY2tcIj48L2ZpZ3VyZT5cbiAgICAgIDwvZGl2PlxuICAgICBgO1xuXG4gICAgIHNwbGl0ID8gJCgnI3NwbGl0Wm9uZScpLmFwcGVuZChjYXJkTWFya3VwKSA6ICQoJyNjYXJkSG9sZGVyJykuYXBwZW5kKGNhcmRNYXJrdXApO1xufTtcblxuXG5mdW5jdGlvbiBkZWFsc1RvRGVhbGVyKG9wZW4gPSB0cnVlKSB7XG7CoMKgLy8gRGVhbHMgdG9wIGNhcmQgdG8gZGVhbGVyIGZhY2UtZG93blxuwqDCoGNvbnN0IGNhcmQgPSBkZWNrLnNwbGljZSgwLCAxKVswXTtcbiAgZGVhbGVySGFuZC5wdXNoKGNhcmQpO1xuwqDCoC8vIENyZWF0aW5nIGEgY2FyZFxuwqDCoGNvbnN0IGNhcmRNYXJrdXAgPSBgXG7CoMKgwqDCoMKgwqA8ZGl2IGlkPVwiY2FyZFwiIGNsYXNzPVwiY2FyZC1kZWFsZXJcIj5cbsKgwqDCoMKgwqDCoMKgwqA8ZmlndXJlIGNsYXNzPVwiY2FyZC1mcm9udC1kZWFsZXIgJHtvcGVuID8gJ29wZW4nIDogJ2Nsb3NlZCd9XCI+XG7CoMKgwqDCoMKgwqDCoMKgPC9maWd1cmU+XG7CoMKgwqDCoMKgwqDCoMKgPGZpZ3VyZSBjbGFzcz1cImNhcmQtYmFjay1kZWFsZXIgJHtvcGVuID8gJ2Nsb3NlZCcgOiAnb3Blbid9XCIgc3R5bGU9XCJiYWNrZ3JvdW5kLWltYWdlOiB1cmwoJHtjYXJkLmltZ30pXCI+PC9maWd1cmU+XG7CoMKgwqDCoMKgwqA8L2Rpdj5cbsKgwqDCoMKgwqBgO1xuwqDCoCQoJyNkZWFsZXJDYXJkWm9uZScpLmFwcGVuZChjYXJkTWFya3VwKTtcblxufVxuXG5cbi8vIFNob3VsZCBvbmx5IHRhcmdldCB0aGUgZmlyc3QgY2FyZC5cbmZ1bmN0aW9uIGZsaXBDYXJkKCkge8KgwqDCoMKgXG7CoMKgJCgnI2NhcmQnKS5hZGRDbGFzcygnZmxpcHBlZCcpO1xufTtcblxuLy8gaWYgdXNlciB3YW50cyB0byBzcGxpdFxuLy8gdGFrZSBhcnJheSBpZiB3YW50IHRvIGNoYW5nZSBydWxlLlxuLy8gaWYgc3BsaXQgdHJ1ZSwgY2FuIG9ubHkgYnkgYXBwbGllZCBvbmNlLlxuZnVuY3Rpb24gdmFsaWRhdGVTcGxpdChhcnJheSwgbWF4U3BsaXQpIHtcbiAgICBpZihhcnJheVswXS52YWx1ZSAhPT0gYXJyYXlbMV0udmFsdWUgJiYgbWF4U3BsaXQgPT09IGZhbHNlICYmIHBsYXllckJhbGFuY2UgPj0gbWF4QmV0KSB7XG4gICAgICAgICB2YWxpZFNwbGl0LnN0YXRlID0gdHJ1ZTtcbiAgICAgICAgICBwbGFjZUJldChtYXhCZXQpO1xuICAgICAgICAgICBnZXRCZXRDaGlwKG1heEJldCwgdHJ1ZSk7XG4gICAgICAgICAgICBwbGF5ZXJTcGxpdEhhbmQucHVzaChhcnJheS5zcGxpY2UoMCwxKVswXSk7XG4gICAgICAgICAgICAkKCcjY2FyZEhvbGRlcicpLmNoaWxkcmVuKCc6Zmlyc3QtY2hpbGQnKS5hcHBlbmRUbygnI3NwbGl0Wm9uZScpO1xuICAgIH0gZWxzZSBmYWxzZTtcbiB9XG5cbi8vIEV2ZW50IGxpc3RuZXIgZm9yIGJ1dHRvbi5cbiQoJy5zcGxpdC1idXR0b24nKS5vbignY2xpY2snLCAoKSA9PiB7XG4gICAgdmFsaWRhdGVTcGxpdChwbGF5ZXJIYW5kLCB2YWxpZFNwbGl0LnN0YXRlKTtcbn0pO1xuXG5cblxuJCgnLmhpdC1idXR0b24nKS5vbignY2xpY2snLCBmdW5jdGlvbigpIHtcbiAgICBpZlNwbGl0VHJ1ZSgpO1xufSk7XG5cbmZ1bmN0aW9uIGlmU3BsaXRUcnVlKCkge1xuICAgIHZhbGlkU3BsaXQuc3RhdGUgPT09IHRydWUgPyBkZWFsc1RvUGxheWVyKG9wZW4gPSB0cnVlKSArIGRlYWxzVG9QbGF5ZXIob3BlbiA9IGZhbHNlKSA6IGZhbHNlO1xufVxuIiwiXG5jb25zdCBkZWNrID0gY2FyZERhdGE7XG5cbmZ1bmN0aW9uIHNodWZmbGUoYXJyYXkpIHtcbiAgdmFyIG0gPSBhcnJheS5sZW5ndGg7XG4gIHZhciBpO1xuICB2YXIgdDtcblxuICAvLyBXaGlsZSB0aGVyZSByZW1haW4gZWxlbWVudHMgdG8gc2h1ZmZsZeKAplxuICB3aGlsZSAobSkge1xuXG4gICAgLy8gUGljayBhIHJlbWFpbmluZyBlbGVtZW504oCmXG4gICAgaSA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIG0tLSk7XG4gICAgLy8gQW5kIHN3YXAgaXQgd2l0aCB0aGUgY3VycmVudCBlbGVtZW50LlxuICAgIHQgPSBhcnJheVttXTtcbiAgICBhcnJheVttXSA9IGFycmF5W2ldO1xuICAgIGFycmF5W2ldID0gdDtcbiAgfVxuXG4gIHJldHVybiBhcnJheTtcbn1cblxuc2h1ZmZsZShkZWNrKTtcblxuIiwiXG5cbmNvbnN0IGNhcmREYXRhID0gW1xue1xuICAgIGltZzogJ2ltYWdlcy9jYXJkcy8xMF9vZl9jbHVicy5zdmcnLFxuICAgIHZhbHVlOiAxMFxufSwge1xuICAgIGltZzogJ2ltYWdlcy9jYXJkcy8xMF9vZl9kaWFtb25kcy5zdmcnLFxuICAgIHZhbHVlOiAxMFxufSwge1xuICAgIGltZzogJ2ltYWdlcy9jYXJkcy8xMF9vZl9oZWFydHMuc3ZnJyxcbiAgICB2YWx1ZTogMTBcbn0sIHtcbiAgICBpbWc6ICdpbWFnZXMvY2FyZHMvMTBfb2Zfc3BhZGVzLnN2ZycsXG4gICAgdmFsdWU6IDEwXG59LCB7XG4gICAgaW1nOiAnaW1hZ2VzL2NhcmRzLzJfb2ZfY2x1YnMuc3ZnJyxcbiAgICB2YWx1ZTogMlxufSwge1xuICAgIGltZzogJ2ltYWdlcy9jYXJkcy8yX29mX2RpYW1vbmRzLnN2ZycsXG4gICAgdmFsdWU6IDJcbn0sIHtcbiAgICBpbWc6ICdpbWFnZXMvY2FyZHMvMl9vZl9oZWFydHMuc3ZnJyxcbiAgICB2YWx1ZTogMlxufSwge1xuICAgIGltZzogJ2ltYWdlcy9jYXJkcy8yX29mX3NwYWRlcy5zdmcnLFxuICAgIHZhbHVlOiAyXG59LCB7XG4gICAgaW1nOiAnaW1hZ2VzL2NhcmRzLzNfb2ZfY2x1YnMuc3ZnJyxcbiAgICB2YWx1ZTogM1xufSwge1xuICAgIGltZzogJ2ltYWdlcy9jYXJkcy8zX29mX2RpYW1vbmRzLnN2ZycsXG4gICAgdmFsdWU6IDNcbn0sIHtcbiAgICBpbWc6ICdpbWFnZXMvY2FyZHMvM19vZl9oZWFydHMuc3ZnJyxcbiAgICB2YWx1ZTogM1xufSwge1xuICAgIGltZzogJ2ltYWdlcy9jYXJkcy8zX29mX3NwYWRlcy5zdmcnLFxuICAgIHZhbHVlOiAzXG59LCB7XG4gICAgaW1nOiAnaW1hZ2VzL2NhcmRzLzRfb2ZfY2x1YnMuc3ZnJyxcbiAgICB2YWx1ZTogNFxufSwge1xuICAgIGltZzogJ2ltYWdlcy9jYXJkcy80X29mX2RpYW1vbmRzLnN2ZycsXG4gICAgdmFsdWU6IDRcbn0sIHtcbiAgICBpbWc6ICdpbWFnZXMvY2FyZHMvNF9vZl9oZWFydHMuc3ZnJyxcbiAgICB2YWx1ZTogNFxufSwge1xuICAgIGltZzogJ2ltYWdlcy9jYXJkcy80X29mX3NwYWRlcy5zdmcnLFxuICAgIHZhbHVlOiA0XG59LCB7XG4gICAgaW1nOiAnaW1hZ2VzL2NhcmRzLzVfb2ZfY2x1YnMuc3ZnJyxcbiAgICB2YWx1ZTogNVxufSwge1xuICAgIGltZzogJ2ltYWdlcy9jYXJkcy81X29mX2RpYW1vbmRzLnN2ZycsXG4gICAgdmFsdWU6IDVcbn0sIHtcbiAgICBpbWc6ICdpbWFnZXMvY2FyZHMvNV9vZl9oZWFydHMuc3ZnJyxcbiAgICB2YWx1ZTogNVxufSwge1xuICAgIGltZzogJ2ltYWdlcy9jYXJkcy81X29mX3NwYWRlcy5zdmcnLFxuICAgIHZhbHVlOiA1XG59LCB7XG4gICAgaW1nOiAnaW1hZ2VzL2NhcmRzLzZfb2ZfY2x1YnMuc3ZnJyxcbiAgICB2YWx1ZTogNlxufSwge1xuICAgIGltZzogJ2ltYWdlcy9jYXJkcy82X29mX2RpYW1vbmRzLnN2ZycsXG4gICAgdmFsdWU6IDZcbn0sIHtcbiAgICBpbWc6ICdpbWFnZXMvY2FyZHMvNl9vZl9oZWFydHMuc3ZnJyxcbiAgICB2YWx1ZTogNlxufSwge1xuICAgIGltZzogJ2ltYWdlcy9jYXJkcy82X29mX3NwYWRlcy5zdmcnLFxuICAgIHZhbHVlOiA2XG59LCB7XG4gICAgaW1nOiAnaW1hZ2VzL2NhcmRzLzdfb2ZfY2x1YnMuc3ZnJyxcbiAgICB2YWx1ZTogN1xufSwge1xuICAgIGltZzogJ2ltYWdlcy9jYXJkcy83X29mX2RpYW1vbmRzLnN2ZycsXG4gICAgdmFsdWU6IDdcbn0sIHtcbiAgICBpbWc6ICdpbWFnZXMvY2FyZHMvN19vZl9oZWFydHMuc3ZnJyxcbiAgICB2YWx1ZTogN1xufSwge1xuICAgIGltZzogJ2ltYWdlcy9jYXJkcy83X29mX3NwYWRlcy5zdmcnLFxuICAgIHZhbHVlOiA3XG59LCB7XG4gICAgaW1nOiAnaW1hZ2VzL2NhcmRzLzhfb2ZfY2x1YnMuc3ZnJyxcbiAgICB2YWx1ZTogOFxufSwge1xuICAgIGltZzogJ2ltYWdlcy9jYXJkcy84X29mX2RpYW1vbmRzLnN2ZycsXG4gICAgdmFsdWU6IDhcbn0sIHtcbiAgICBpbWc6ICdpbWFnZXMvY2FyZHMvOF9vZl9oZWFydHMuc3ZnJyxcbiAgICB2YWx1ZTogOFxufSwge1xuICAgIGltZzogJ2ltYWdlcy9jYXJkcy84X29mX3NwYWRlcy5zdmcnLFxuICAgIHZhbHVlOiA4XG59LCB7XG4gICAgaW1nOiAnaW1hZ2VzL2NhcmRzLzlfb2ZfY2x1YnMuc3ZnJyxcbiAgICB2YWx1ZTogOVxufSwge1xuICAgIGltZzogJ2ltYWdlcy9jYXJkcy85X29mX2RpYW1vbmRzLnN2ZycsXG4gICAgdmFsdWU6IDlcbn0sIHtcbiAgICBpbWc6ICdpbWFnZXMvY2FyZHMvOV9vZl9oZWFydHMuc3ZnJyxcbiAgICB2YWx1ZTogOVxufSwge1xuICAgIGltZzogJ2ltYWdlcy9jYXJkcy85X29mX3NwYWRlcy5zdmcnLFxuICAgIHZhbHVlOiA5XG59LCB7XG4gICAgaW1nOiAnaW1hZ2VzL2NhcmRzL2FjZV9vZl9jbHVicy5zdmcnLFxuICAgIHZhbHVlOiAxMVxuICAgIFxufSwge1xuICBpbWc6ICdpbWFnZXMvY2FyZHMvYWNlX29mX2RpYW1vbmRzLnN2ZycsXG4gICAgdmFsdWU6IDExXG4gICAgXG59LCB7XG4gICAgaW1nOiAnaW1hZ2VzL2NhcmRzL2FjZV9vZl9oZWFydHMuc3ZnJyxcbiAgICB2YWx1ZTogMTFcbiAgICBcbn0sIHtcbiAgICBpbWc6ICdpbWFnZXMvY2FyZHMvYWNlX29mX3NwYWRlcy5zdmcnLFxuICAgIHZhbHVlOiAxMVxuICAgIFxufSwge1xuICAgIGltZzogJ2ltYWdlcy9jYXJkcy9qYWNrX29mX2NsdWJzMi5zdmcnLFxuICAgIHZhbHVlOiAxMFxufSwge1xuICAgIGltZzogJ2ltYWdlcy9jYXJkcy9qYWNrX29mX2RpYW1vbmRzMi5zdmcnLFxuICAgIHZhbHVlOiAxMFxufSwge1xuICAgIGltZzogJ2ltYWdlcy9jYXJkcy9qYWNrX29mX2hlYXJ0czIuc3ZnJyxcbiAgICB2YWx1ZTogMTBcbn0sIHtcbiAgICBpbWc6ICdpbWFnZXMvY2FyZHMvamFja19vZl9zcGFkZXMyLnN2ZycsXG4gICAgdmFsdWU6IDEwXG59LCB7XG4gICAgaW1nOiAnaW1hZ2VzL2NhcmRzL2tpbmdfb2ZfY2x1YnMyLnN2ZycsXG4gICAgdmFsdWU6IDEwXG59LCB7XG4gICAgaW1nOiAnaW1hZ2VzL2NhcmRzL2tpbmdfb2ZfZGlhbW9uZHMyLnN2ZycsXG4gICAgdmFsdWU6IDEwXG59LCB7XG4gICAgaW1nOiAnaW1hZ2VzL2NhcmRzL2tpbmdfb2ZfaGVhcnRzMi5zdmcnLFxuICAgIHZhbHVlOiAxMFxufSwge1xuICAgIGltZzogJ2ltYWdlcy9jYXJkcy9raW5nX29mX3NwYWRlczIuc3ZnJyxcbiAgICB2YWx1ZTogMTBcbn0sIHtcbiAgICBpbWc6ICdpbWFnZXMvY2FyZHMvcXVlZW5fb2ZfY2x1YnMyLnN2ZycsXG4gICAgdmFsdWU6IDEwXG59LCB7XG4gICAgaW1nOiAnaW1hZ2VzL2NhcmRzL3F1ZWVuX29mX2RpYW1vbmRzMi5zdmcnLFxuICAgIHZhbHVlOiAxMFxufSwge1xuICAgIGltZzogJ2ltYWdlcy9jYXJkcy9xdWVlbl9vZl9oZWFydHMyLnN2ZycsXG4gICAgdmFsdWU6IDEwXG59LCB7XG4gICAgaW1nOiAnaW1hZ2VzL2NhcmRzL3F1ZWVuX29mX3NwYWRlczIuc3ZnJyxcbiAgICB2YWx1ZTogMTBcbn1dO1xuXG5jb25zdCB0ZXN0Q2FyZERhdGEgPSBbXG57XG4gIGltZzogJ2ltYWdlcy9jYXJkcy9hY2Vfb2ZfZGlhbW9uZHMuc3ZnJyxcbiAgICB2YWx1ZTogMTFcbiAgICBcbn0sIHtcbiAgICBpbWc6ICdpbWFnZXMvY2FyZHMvcXVlZW5fb2Zfc3BhZGVzMi5zdmcnLFxuICAgIHZhbHVlOiAxMVxufSwge1xuICBpbWc6ICdpbWFnZXMvY2FyZHMvYWNlX29mX2RpYW1vbmRzLnN2ZycsXG4gICAgdmFsdWU6IDNcbiAgICBcbn0gLCB7XG4gIGltZzogJ2ltYWdlcy9jYXJkcy9hY2Vfb2ZfZGlhbW9uZHMuc3ZnJyxcbiAgICB2YWx1ZTogMTBcbiAgICBcbn0sICB7XG4gIGltZzogJ2ltYWdlcy9jYXJkcy9hY2Vfb2ZfZGlhbW9uZHMuc3ZnJyxcbiAgICB2YWx1ZTogM1xuICAgIFxufVxuXG5dO1xuXG5cbiBjb25zdCBwcmVsb2FkSW1hZ2UgPSB1cmwgPT4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuwqDCoMKgwqBjb25zdCBpbWcgPSBuZXcgSW1hZ2UoKTtcbsKgwqDCoMKgaW1nLnNyYyA9IHVybDtcbsKgwqDCoMKgc2V0VGltZW91dCgoKSA9PiB7XG7CoMKgwqDCoMKgwqDCoMKgaW1nLm9ubG9hZCA9IHJlc29sdmUoaW1nKTtcbsKgwqDCoMKgwqDCoMKgwqBpbWcub25lcnJvciA9IHJlamVjdDtcbsKgwqDCoMKgfSwgMTAwKVxufSk7XG5cblByb21pc2UuYWxsKGNhcmREYXRhLm1hcChjYXJkID0+IHByZWxvYWRJbWFnZShjYXJkLmltZykpKS50aGVuKHJlcyA9PiB7XG5cbsKgwqDCoMKgJCggXCIjZ2FtZVdpbmRvd1wiICkucmVtb3ZlKCk7XG5cbn0pO1xuXG5cblxuXG5cblxuXG4vLyBXb3JrIGluIHRoZSBjb25zb2xlIGZvciBub3cuIHRoZW4gYXBwZW5kIHJlc3VsdHMgaW4gZG9tLlxuXG4vLyAxLiBCdWlsZCBBcnJheSBvZiBjYXJkIE9iamVjdCwgd2l0aCBpbWFnZSBuYW1lcyBhbmQgdmFsdWVzLlxuXG4vLyAyLiBXZSB3YW50IHRvIHJldHVybiBhIG5ldyBBcnJheSwgc2h1ZmZsZWQgZGVjay5cbi8vIFdpY2ggY2FuIGVpdGhlciBiZSwgdGhhdCBpIHRha2Ugb3V0IGEgcmFuZG9tIGNhcmQsIG9yIEkgd2lsbFxuLy8gYXNzZW1ibGUgdGhlIG9yZGVyIG9mIHRoZSBkZWNrIHJhbmRvbWx5LiBcblxuLy8gMy4gRHJhdyBjYXJkIGZyb20gdG9wIG9mIHRoZSBkZWNrLlxuXG4vLyA0LiBEZWFsZXIgbG9naWNcbi8vIERlYWxlciBzaG91bGQgaGFuZCB1dCBjYXJkIHRvIHBsYXllciBvbmUgYXQgYSB0aW1lXG4vLyBTbyBmaXJzdCBvbmUgY2FyZCB0byBtZSB0aGVuIG9uZSBmYWNlIGRvd24gdG8gdGhlIERlYWxlclxuLy8gVGhlbiBhbm90aGVyIHRvIG1lIHRoZW4gYSBmYWNlLXVwIHRvIHRoZSBkZWFsZXIuXG4iLCJjb25zdCBjaGlwRGF0YSA9IHtcbsKgwqDCoMKgY2hpcF8xOiB7XG7CoMKgwqDCoMKgwqDCoMKgaW1nOiAnaW1hZ2VzL2NoaXBzL2NoaXAtMS5zdmcnLFxuwqDCoMKgwqDCoMKgwqDCoHZhbHVlOiAxLFxuICAgICAgICBjbGFzczogJ29uZSdcbsKgwqDCoMKgfSxcbsKgwqDCoMKgY2hpcF8yOiB7XG7CoMKgwqDCoMKgwqDCoMKgaW1nOiAnaW1hZ2VzL2NoaXBzL2NoaXAtMi5zdmcnLFxuwqDCoMKgwqDCoMKgwqDCoHZhbHVlOiAyLFxuICAgICAgICBjbGFzczogJ3R3bydcbsKgwqDCoMKgfSxcbsKgwqDCoMKgY2hpcF81OsKgwqB7XG7CoMKgwqDCoMKgwqDCoMKgaW1nOiAnaW1hZ2VzL2NoaXBzL2NoaXAtNS5zdmcnLFxuwqDCoMKgwqDCoMKgwqDCoHZhbHVlOiA1LFxuICAgICAgICBjbGFzczogJ2ZpdmUnXG7CoMKgwqDCoH0sXG7CoMKgwqDCoGNoaXBfMTA6IHtcbsKgwqDCoMKgwqDCoMKgwqBpbWc6ICdpbWFnZXMvY2hpcHMvY2hpcC0xMC5zdmcnLFxuwqDCoMKgwqDCoMKgwqDCoHZhbHVlOiAxMCxcbiAgICAgICAgY2xhc3M6ICd0ZW4nXG5cbsKgwqDCoMKgfSxcbsKgwqDCoMKgY2hpcF8yMDoge1xuwqDCoMKgwqDCoMKgwqDCoGltZzogJy4uL2ltYWdlcy9jaGlwcy9jaGlwLTIwLnN2ZycsXG7CoMKgwqDCoMKgwqDCoMKgdmFsdWU6IDIwLFxuwqDCoMKgwqDCoMKgwqDCoGNsYXNzOiAndHdlZW50eSdcbsKgwqDCoMKgfSxcbsKgwqDCoMKgY2hpcF81MDoge1xuwqDCoMKgwqDCoMKgwqDCoGltZzogJy4uL2ltYWdlcy9jaGlwcy9jaGlwLTUwLnN2ZycsXG7CoMKgwqDCoMKgwqDCoMKgdmFsdWU6IDUwLFxuICAgICAgICBjbGFzczogJ2ZpZnRoeSdcbsKgwqDCoMKgfSxcbsKgwqDCoMKgY2hpcF8xMDA6IHtcbsKgwqDCoMKgwqDCoMKgwqBpbWc6ICdpbWFnZXMvY2hpcHMvY2hpcC0xMDAuc3ZnJyxcbsKgwqDCoMKgwqDCoMKgwqB2YWx1ZTogMTAwLFxuICAgICAgICBjbGFzczogJ2h1bmRyZWQnXG5cbsKgwqDCoMKgfVxufTsiLCIvLyBmdW5jdGlvbiB0aGF0IGluaXRpYXRlIGFmdGVyIHVzZXIgY2xpY2tzIHN0YXJ0LlxuLy8gUmVhZHkgdG8gcGxheS5cbi8vIEFuZCBnb3Qgc29tZSBydWxlcyBhdmxpYWJsZSB0byBoaW0gb3IgaGVyLlxuJCgnLnN0YXJ0LWJ1dHRvbicpLm9uKCdjbGljaycsIGZ1bmN0aW9uKCkge1xuICAgICQoJy5zdGFydC13aW5kb3cnKS5yZW1vdmUoKTtcbiAgICAkKCcuaGl0LWJ1dHRvbicpLnJlbW92ZUF0dHIoXCJkaXNhYmxlZFwiKTtcbiAgICAkKCcuc3BsaXQtYnV0dG9uJykucmVtb3ZlQXR0cihcImRpc2FibGVkXCIpO1xuICAgICQoJy5kb3VibGUtYnV0dG9uJykucmVtb3ZlQXR0cihcImRpc2FibGVkXCIpO1xuICAgICQoJy5zdGF5LWJ1dHRvbicpLnJlbW92ZUF0dHIoXCJkaXNhYmxlZFwiKTtcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgJCgnLmFkZFN1Yi10b29sdGlwJykuYWRkQ2xhc3MoJ3Nob3ctdG9vbHRpcCcpO1xuICAgICAgICBwbGFjZUJldChtYXhCZXQpO1xuICAgICAgICBnZXRCZXRDaGlwKG1heEJldCwgZmFsc2UpO1xuICAgICAgICBcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICBkZWFsc1RvUGxheWVyKCk7XG4gICAgICAgIH0sIDQwMCk7XG5cbiAgICAgICAgc2V0VGltZW91dChkZWFsc1RvRGVhbGVyKGZhbHNlKSwgNjAwKTtcblxuICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAkKCcuYWRkU3ViLXRvb2x0aXAnKS5yZW1vdmVDbGFzcygnc2hvdy10b29sdGlwJyk7XG4gICAgICAgIH0sIDcwMCk7XG5cbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICBkZWFsc1RvUGxheWVyKCk7XG4gICAgICAgIH0sIDkwMCk7XG4gICAgICAgIFxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIGRlYWxzVG9EZWFsZXIoKTtcbiAgICAgICAgfSwgMTEwMCk7XG4gICAgIH0sIDUwMCk7XG4gICAgfSk7XG5cblxuXG4vLyBOZWVkIHRvIGNvdW50IHZhbHVlIGluIGRlYWxlciBhcnJheS5cbiQoJy5zdGF5LWJ1dHRvbicpLm9uKCdjbGljaycsIGZ1bmN0aW9uKCkge1xuICAgICBmbGlwQ2FyZCgpO1xuICAgICBnaXZlVG9EZWFsZXIoKTtcbn0pO1xuXG5cblxuLy8gU2V0IGJ1dHRvbnMgdG8gZGlzYWJsZVxuJCgnLmhpdC1idXR0b24nKS5hdHRyKFwiZGlzYWJsZWRcIiwgXCJkaXNhYmxlZFwiKTtcbiQoJy5zcGxpdC1idXR0b24nKS5hdHRyKFwiZGlzYWJsZWRcIiwgXCJkaXNhYmxlZFwiKTtcbiQoJy5kb3VibGUtYnV0dG9uJykuYXR0cihcImRpc2FibGVkXCIsIFwiZGlzYWJsZWRcIik7XG4kKCcuc3RheS1idXR0b24nKS5hdHRyKFwiZGlzYWJsZWRcIiwgXCJkaXNhYmxlZFwiKTtcbiIsImNvbnN0IGNhcmRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmNhcmQtZnJvbnQnKTtcbmNvbnN0IGNhcmRIb2xkZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjY2FyZEhvbGRlcicpO1xuY29uc3Qgc3BsaXRab25lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3NwbGl0Wm9uZScpO1xuY29uc3QgZGVhbGVyQ2FyZFpvbmUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjZGVhbGVyQ2FyZFpvbmUnKTtcblxuXG4vLyBMYXkgb3V0IHRoZSBjYXJkcyB3aXRoIGEgYW5kIGV4dHJhIG1hcmdpbiBmcm9tIHRoZSBmaXJzdC5cbi8vIFRoZW4gcmV2ZXJzZSB0aGUgYXJyYXkgdG8gZ2V0IGl0IHRvIGRvIHNwbGF5IHJpZ2h0IHRvIGxlZnQuXG4vLyBmdW5jdGlvbiBydW4oKSB7XG4vLyAgIHZhciAgY291bnQgPSAtMjtcbi8vICAgYXJyYXkucmV2ZXJzZSgpO1xuLy8gIGZvciAodmFyIGkgPSAwOyBpIDwgYXJyYXkubGVuZ3RoOyBpKyspIHtcbi8vICAgICBjb25zb2xlLmxvZyhjb3VudC0tKTtcbi8vICAgICBhcnJheVtpXS5zdHlsZS5tYXJnaW5MZWZ0ID0gXCJcIiArIGNvdW50ICsgJ2VtJyArIFwiXCI7XG4vLyAgfSBcbi8vICByZXR1cm4gYXJyYXkucmV2ZXJzZSgpLFxuLy8gIGNhcmRIb2xkZXIuc3R5bGUubWFyZ2luTGVmdCA9IFwiXCIgKyAgYXJyYXkubGVuZ3RoICsgJ2VtJyArIFwiXCIsXG4vLyAgc3BsaXRab25lLnN0eWxlLm1hcmdpbkxlZnQgPSBcIlwiICsgLShhcnJheS5sZW5ndGgpICsgJ2VtJyArIFwiXCIsXG4vLyAgZGVhbGVyQ2FyZFpvbmUuc3R5bGUubWFyZ2luTGVmdCA9IFwiXCIgKyAoYXJyYXkubGVuZ3RoKSArICdlbScgKyBcIlwiO1xuLy8gfVxuXG5cbi8vIEpxdWVyeSB3YXkgb2YgdXBkYXRpbmcgdGhlbVxuXG5cblxuLy8gJCgnI2RlYWxlckNhcmRab25lJykub24oJ2NsaWNrJywnI2NhcmQnLCBmdW5jdGlvbihlKSB7XG4vLyAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcbi8vIFx0JCggdGhpcyApLnRvZ2dsZUNsYXNzKCdmbGlwcGVkJyk7XG4vLyB9KTtcblxuXG5cblxuXG5cblxuICBcbiIsIlxuJCggZnVuY3Rpb24oKSB7XG4gICAgJCggXCIjZHJhZ2dhYmxlXCIgKS5kcmFnZ2FibGUoKTtcbiAgfSApOyJdfQ==
